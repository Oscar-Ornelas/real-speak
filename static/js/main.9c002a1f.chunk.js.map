{"version":3,"sources":["react-auth0-spa.js","components/Landing.js","components/Home.js","views/useApiCall.js","components/RoomSettingsForm.js","components/NavBar.js","components/CreateRoomForm.js","components/RoomSideBar.js","components/UserSideBar.js","components/MessageList.js","components/Input.js","components/ChatApp.js","utils/history.js","App.js","index.js"],"names":["DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","title","location","pathname","Auth0Context","React","createContext","useAuth0","useContext","Landing","loginWithRedirect","className","onClick","Home","props","useState","Math","floor","random","roomId","roomName","setRoomName","username","setUsername","useHistory","user","useEffect","access_token","fetch","sub","headers","Authorization","then","response","json","data","catch","err","console","log","userId","name","method","body","JSON","stringify","responseData","isNewUser","push","rooms","useApiCall","Modal","setAppElement","RoomSettingsForm","newUserID","newRoomName","formData","setFormData","modalIsOpen","setIsOpen","closeModal","isOpen","onRequestClose","contentLabel","overlayClassName","for","placeholder","id","onChange","e","target","value","prevFormData","type","preventDefault","newUserId","NavBar","toggleRoomNavSlide","toggleUserNavSlide","CreateRoomForm","roomDescription","handleChange","maxlength","required","maxLength","setTimeout","reload","RoomSideBar","isAuthenticated","logout","reloadPage","removeRoomNavSlide","setRoomNavSlide","addEventListener","removeEventListener","roomNavSlide","map","room","key","to","UserSideBar","removeUserNavSlide","setUserNavSlide","userNavSlide","roomUsers","MessageList","messages","length","message","index","text","Input","timeSent","messageInfo","setMessageInfo","prevMessageInfo","onSubmit","ChatApp","fullUserInfo","setFullUserInfo","userRooms","setUserRooms","setRoomUsers","setMessages","useParams","socket","socketIOClient","users","forEach","prevUserRooms","on","emit","prevMessages","scrollTo","scrollHeight","prevUserNavSlide","prevRoomNavSlide","createBrowserHistory","App","accessToken","setAccessToken","loading","basename","browserHistory","path","exact","ReactDOM","render","children","onRedirectCallback","initOptions","setIsAuthenticated","setUser","auth0Client","setAuth0","setLoading","popupOpen","setPopupOpen","a","createAuth0Client","auth0FromHook","search","includes","handleRedirectCallback","appState","getUser","initAuth0","loginWithPopup","params","error","Provider","getIdTokenClaims","getTokenSilently","getTokenWithPopup","domain","config","client_id","clientId","redirect_uri","origin","audience","targetUrl","getElementById"],"mappings":"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","file":"static/js/main.9c002a1f.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\r\n\r\nconst DEFAULT_REDIRECT_CALLBACK = () =>\r\n  window.history.replaceState({}, document.title, window.location.pathname);\r\n\r\nexport const Auth0Context = React.createContext();\r\nexport const useAuth0 = () => useContext(Auth0Context);\r\nexport const Auth0Provider = ({\r\n  children,\r\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\r\n  ...initOptions\r\n}) => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState();\r\n  const [user, setUser] = useState();\r\n  const [auth0Client, setAuth0] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const initAuth0 = async () => {\r\n      const auth0FromHook = await createAuth0Client(initOptions);\r\n      setAuth0(auth0FromHook);\r\n\r\n      if (window.location.search.includes(\"code=\") &&\r\n          window.location.search.includes(\"state=\")) {\r\n        const { appState } = await auth0FromHook.handleRedirectCallback();\r\n        onRedirectCallback(appState);\r\n      }\r\n\r\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\r\n\r\n      setIsAuthenticated(isAuthenticated);\r\n\r\n      if (isAuthenticated) {\r\n        const user = await auth0FromHook.getUser();\r\n        setUser(user);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n    initAuth0();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const loginWithPopup = async (params = {}) => {\r\n    setPopupOpen(true);\r\n    try {\r\n      await auth0Client.loginWithPopup(params);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setPopupOpen(false);\r\n    }\r\n    const user = await auth0Client.getUser();\r\n    setUser(user);\r\n    setIsAuthenticated(true);\r\n  };\r\n\r\n  const handleRedirectCallback = async () => {\r\n    setLoading(true);\r\n    await auth0Client.handleRedirectCallback();\r\n    const user = await auth0Client.getUser();\r\n    setLoading(false);\r\n    setIsAuthenticated(true);\r\n    setUser(user);\r\n  };\r\n  return (\r\n    <Auth0Context.Provider\r\n      value={{\r\n        isAuthenticated,\r\n        user,\r\n        loading,\r\n        popupOpen,\r\n        loginWithPopup,\r\n        handleRedirectCallback,\r\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\r\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\r\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\r\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\r\n        logout: (...p) => auth0Client.logout(...p)\r\n      }}\r\n    >\r\n      {children}\r\n    </Auth0Context.Provider>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\n\r\nfunction Landing() {\r\n  const {loginWithRedirect} = useAuth0();\r\n\r\n  return (\r\n    <div className=\"landing\">\r\n      <h1 className=\"logo\">RealSpeak</h1>\r\n      <h2 className=\"landing-header\">A new way to chat with your communities and friends.</h2>\r\n      <p className=\"landing-subtitle\">RealSpeak is the easiest way to communicate over voice, video, and text,\r\n      whether you’re part of a school club, a nightly gaming group, a worldwide\r\n      art community, or just a handful of friends that want to hang out.\r\n      </p>\r\n      <button className=\"landing-btn\" onClick={() => loginWithRedirect({})}>Sign Up</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Landing;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {useHistory, Redirect} from 'react-router-dom';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\n\r\nfunction Home(props) {\r\n  const [roomId, setRoomId] = useState(Math.floor((Math.random() * 9999999) + 1000000));\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [username, setUsername] = useState(null);\r\n  const history = useHistory();\r\n  const {user} = useAuth0();\r\n\r\n  useEffect(() => {\r\n    if(user && props.access_token) {\r\n      fetch(`https://dev-pdp1v9a4.auth0.com/api/v2/users/${user.sub}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${props.access_token}`\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setUsername(data.username);\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n  }, [user, props.access_token])\r\n\r\n  useEffect(() => {\r\n    if(user && username) {\r\n      const data = {userId: user.name};\r\n      fetch(\"http://localhost:4001/api/findUser\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseData => {\r\n        if(responseData.isNewUser) {\r\n          setRoomName(\"General\");\r\n          const data = {roomId, roomName: \"General\", userId: user.name, username};\r\n          fetch(\"http://localhost:4001/api/createUser\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n          })\r\n          .then(() => history.push(`/chatapp/${roomName}/${roomId}`))\r\n          .catch(err => console.log(err))\r\n        } else {\r\n          const data = {roomId: responseData.rooms[0]};\r\n          fetch(\"http://localhost:4001/api/findRoom\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n          })\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            console.log(data);\r\n            history.push(`/chatapp/${data.roomName}/${data.roomId}`)\r\n          })\r\n          .catch(err => console.log(err))\r\n        }\r\n      });\r\n    }\r\n  }, [user, username]);\r\n\r\n  return (\r\n    <div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Home;\r\n","import {useState, useEffect} from 'react';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\n\r\nfunction useApiCall() {\r\n  const { getTokenSilently } = useAuth0();\r\n  const [apiInfo, setApiInfo] = useState({});\r\n  const [token, setToken] = useState(null);\r\n\r\n\r\n  getTokenSilently()\r\n  .then(accessToken => {\r\n    setToken(accessToken);\r\n    setApiInfo({access_token: accessToken, expires_in: 84600})\r\n  });\r\n\r\n  const jsonApiInfo = JSON.stringify(apiInfo);\r\n\r\n  return jsonApiInfo;\r\n\r\n}\r\n\r\nexport default useApiCall;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nModal.setAppElement('#root');\r\n\r\nfunction RoomSettingsForm(props) {\r\n  const [formData, setFormData] = useState({newUserID: \"\", userId: \"\", newRoomName: \"\"});\r\n  const [modalIsOpen,setIsOpen] = useState(false);\r\n  const history = useHistory();\r\n\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function closeModal(){\r\n    setIsOpen(false);\r\n  }\r\n\r\n  function handleChange(e) {\r\n    const {value, name} = e.target;\r\n    setFormData(prevFormData => ({...prevFormData, [name]: value}));\r\n  }\r\n\r\n  function addUser(e) {\r\n    const data = {userId: formData.userId, roomId: props.roomId};\r\n    e.preventDefault();\r\n    fetch(\"http://localhost:4001/api/addUserToRoom\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    setIsOpen(false);\r\n    setFormData(prevFormData => ({...prevFormData, newUserId: \"\"}));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <button className=\"navbar-modal-btn\" onClick={openModal}><i className=\"fas fa-ellipsis-v\"></i></button>\r\n\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={closeModal}\r\n        contentLabel=\"Room Settings\"\r\n        className=\"modal\"\r\n        overlayClassName=\"overlay\"\r\n      >\r\n        <div className=\"room-form-modal\">\r\n          <div className=\"room-form-modal-header\">\r\n            <h2 className=\"room-form-header\">Settings</h2>\r\n            <button className=\"close-room-form\" onClick={closeModal}>X</button>\r\n          </div>\r\n          <div className=\"room-form-container\">\r\n            <form className=\"room-form\">\r\n              <div className=\"room-form-inputs\">\r\n\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"userId\">Add user</label>\r\n                  <input\r\n                    placeholder=\"User Id (Email)\"\r\n                    className=\"input\"\r\n                    id=\"userId\"\r\n                    onChange={handleChange}\r\n                    value={formData.userId}\r\n                    type=\"text\"\r\n                    name=\"userId\"\r\n                  />\r\n                </div>\r\n                <button className=\"room-form-submit\" onClick={addUser}>Add User</button>\r\n\r\n                {/*<div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"userId\">Remove user</label>\r\n                  <input\r\n                    placeholder=\"User Id (Email)\"\r\n                    className=\"input\"\r\n                    id=\"userId\"\r\n                    onChange={handleChange}\r\n                    value={formData.userId}\r\n                    type=\"text\"\r\n                    name=\"userId\"\r\n                  />\r\n                </div>\r\n                <button className=\"room-form-submit\" onClick={\"Remove User\"}>Remove User</button>\r\n              */}\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomSettingsForm;\r\n","import React from 'react';\r\nimport RoomSettingsForm from './RoomSettingsForm';\r\n\r\nfunction NavBar(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header-content\">\r\n        <div className=\"nav-container\">\r\n          <div className=\"nav-adjacent\">\r\n            <button onClick={props.toggleRoomNavSlide} className=\"open-room-side-nav\"><i className=\"fas fa-bars\"></i></button>\r\n            <h2 className=\"room-header\"># {props.roomName}</h2>\r\n          </div>\r\n          <nav className=\"nav\">\r\n            <ul className=\"nav-list\">\r\n              <li className=\"nav-item open-user-side-nav\" onClick={props.toggleUserNavSlide}><i className=\"fas fa-user-friends\"></i></li>\r\n              <RoomSettingsForm roomName={props.roomName} roomId={props.roomId}/>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default NavBar;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\nimport Modal from 'react-modal';\r\nModal.setAppElement('#root')\r\n\r\nfunction CreateRoomForm(props){\r\n  const {user} = useAuth0();\r\n  const [modalIsOpen,setIsOpen] = useState(false);\r\n  const [formData, setFormData] = useState({roomName: \"\", roomDescription: \"\"});\r\n\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function closeModal(){\r\n    setIsOpen(false);\r\n  }\r\n\r\n  function handleChange(e) {\r\n    const {value, name} = e.target;\r\n    setFormData(prevFormData => ({...prevFormData, [name]: value}));\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    const roomId = Math.floor((Math.random() * 9999999) + 1000000);\r\n    const roomName = formData.roomName;\r\n    const data = {userId: user.name, roomId, roomName, username: props.username};\r\n    e.preventDefault();\r\n    fetch(\"http://localhost:4001/api/updateUser\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    setIsOpen(false);\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 100);\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <>\r\n      <p onClick={openModal} className=\"sidebar-modal-header\">+ Add a room</p>\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={closeModal}\r\n        contentLabel=\"Create Room Form\"\r\n        className=\"modal\"\r\n        overlayClassName=\"overlay\"\r\n      >\r\n        <div className=\"room-form-modal\">\r\n          <div className=\"room-form-modal-header\">\r\n            <h2 className=\"room-form-header\">Create Room</h2>\r\n            <button className=\"close-room-form\" onClick={closeModal}>X</button>\r\n          </div>\r\n\r\n          <div className=\"room-form-container\">\r\n            <form className=\"room-form\">\r\n              <div className=\"room-form-inputs\">\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"roomName\">Name</label>\r\n                  <input maxlength=\"25\" className=\"input\" id=\"roomName\" onChange={handleChange} value={formData.roomName} required type=\"text\" name=\"roomName\"/>\r\n                </div>\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"roomDescription\">Description (Optional)</label>\r\n                  <input maxLength=\"75\" className=\"input\" id=\"roomDescription\" onChange={handleChange} value={formData.roomDescription} type=\"text\" name=\"roomDescription\"/>\r\n                </div>\r\n              </div>\r\n              <button className=\"room-form-submit\" onClick={handleSubmit} >Create Room</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n      </>\r\n\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateRoomForm;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\nimport CreateRoomForm from './CreateRoomForm';\r\n\r\nfunction RoomSideBar(props) {\r\n  const { isAuthenticated, loginWithRedirect, logout, user} = useAuth0();\r\n\r\n  useEffect(() => {\r\n    function removeRoomNavSlide() {\r\n      props.setRoomNavSlide(false)\r\n    }\r\n\r\n    document.body.addEventListener(\"click\", removeRoomNavSlide);\r\n\r\n    return () => document.body.removeEventListener(\"click\", removeRoomNavSlide)\r\n  }, [])\r\n\r\n  function reloadPage() {\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 10)\r\n  }\r\n\r\n  return (\r\n    <div className=\"room-side-bar\">\r\n      <div className=\"room-side-bar-content\">\r\n        <nav className={`room-side-nav ${props.roomNavSlide ? \"room-side-nav-open\" : \"\"}`}>\r\n          <div className=\"room-side-nav-content\">\r\n            <h3 className=\"room-side-nav-list-header\">Rooms</h3>\r\n            <ul className=\"room-side-nav-list\">\r\n              {props.rooms.map(room => (\r\n                <li key={room.roomId} onClick={reloadPage} className=\"room-side-nav-item\"><Link className=\"link\" to={`/chatapp/${room.roomName}/${room.roomId}`}># {room.roomName}</Link></li>\r\n              ))}\r\n              {user && <CreateRoomForm username={props.username}/>}\r\n            </ul>\r\n          </div>\r\n\r\n\r\n          {!isAuthenticated && (\r\n            <button onClick={() => loginWithRedirect({})}>Log in</button>\r\n          )}\r\n\r\n          {isAuthenticated && <button className=\"logout-btn\" onClick={() => logout()}>Log out</button>}\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomSideBar;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\nfunction UserSideBar(props) {\r\n\r\n  useEffect(() => {\r\n    function removeUserNavSlide() {\r\n      props.setUserNavSlide(false)\r\n    }\r\n\r\n    document.body.addEventListener(\"click\", removeUserNavSlide);\r\n\r\n    return () => document.body.removeEventListener(\"click\", removeUserNavSlide)\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"user-side-bar\">\r\n      <div className=\"user-side-bar-content\">\r\n        <nav className={`user-side-nav ${props.userNavSlide ? \"user-side-nav-open\" : \"\"}`}>\r\n          <div className=\"user-side-nav-content\">\r\n            <h3 className=\"user-side-nav-list-header\"># {props.roomName}</h3>\r\n            <p className=\"user-side-nav-room-description\">{props.roomDescription}</p>\r\n            <h3 className=\"user-side-nav-list-header\">Members</h3>\r\n            <ul className=\"user-side-nav-list\">\r\n              {props.roomUsers.map(user => (\r\n                <li key={user.id} className=\"user-side-nav-item\">\r\n                  {/*<i style={{color: user.presence.state === 'online' ? \"#66FF00\" : \"#FF0000\"}} className=\"fas fa-circle\"></i>*/} {user.username}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserSideBar;\r\n","import React from 'react';\r\n\r\nfunction MessageList(props) {\r\n  return (\r\n    <ul className=\"message-list\">\r\n        {props.messages.length === 0 && (\r\n          <li className=\"message-welcome\">\r\n            <h2 className=\"room-header\"># {props.roomName}</h2>\r\n            <p>Welcome to the <strong># {props.roomName}</strong> room!</p>\r\n          </li>\r\n        )}\r\n        {props.messages.map((message, index) => (\r\n          <li className=\"message-item\" key={index}>\r\n            <div className=\"message-item-content\">\r\n              <h3 className=\"message-sender\">{message.username}</h3>\r\n              <p className=\"message-text\">{message.text}</p>\r\n            </div>\r\n          </li>\r\n        ))}\r\n        <li></li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default MessageList;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\nfunction Input(props) {\r\n  const [messageInfo, setMessageInfo] = useState({username: \"\", timeSent: \"\", text: \"\", roomId: \"\"});\r\n\r\n  useEffect(() => {\r\n    if(props.username) {\r\n      setMessageInfo(prevMessageInfo => ({...prevMessageInfo, username: props.username}));\r\n    }\r\n\r\n    if(props.roomId) {\r\n      setMessageInfo(prevMessageInfo => ({...prevMessageInfo, roomId: props.roomId}));\r\n    }\r\n  }, [props.username, props.roomId]);\r\n\r\n  function handleChange(e) {\r\n    const {value} = e.target;\r\n    setMessageInfo(prevMessageInfo => ({...prevMessageInfo, text: value}));\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onSubmit(messageInfo);\r\n    setMessageInfo(prevMessageInfo => ({...prevMessageInfo, timeSent: \"\", text: \"\"}));\r\n  }\r\n\r\n  return (\r\n    <div className=\"form-container\">\r\n      <div className=\"form-content\">\r\n        <form onSubmit={handleSubmit} className=\"input-field\">\r\n            <input type=\"text\" className=\"message-input\" onChange={handleChange} value={messageInfo.text} placeholder={`Message #${props.roomName}`} />\r\n            <button className=\"message-submit\"><i className=\"fas fa-paper-plane\"></i></button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\nexport default Input;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport useApiCall from '../views/useApiCall';\r\nimport {useAuth0} from \"../react-auth0-spa\";\r\nimport NavBar from './NavBar';\r\nimport RoomSideBar from './RoomSideBar';\r\nimport UserSideBar from './UserSideBar';\r\nimport MessageList from './MessageList';\r\nimport Input from './Input';\r\n\r\nfunction ChatApp(props) {\r\n  const [fullUserInfo, setFullUserInfo] = useState({});\r\n  const [userRooms, setUserRooms] = useState([]);\r\n  const [roomUsers, setRoomUsers] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const [roomNavSlide, setRoomNavSlide] = useState(false);\r\n  const [userNavSlide, setUserNavSlide] = useState(false);\r\n  const {roomId} = useParams();\r\n  const {roomName} = useParams();\r\n  const {user} = useAuth0();\r\n  const socket = socketIOClient(`http://127.0.0.1:4001`);\r\n\r\n  useEffect(() => {\r\n    const data = {roomId};\r\n    fetch(\"http://localhost:4001/api/findRoom\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log(data.users)\r\n      setRoomUsers(data.users)\r\n    })\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const data = {userId: user.name};\r\n    fetch(\"http://localhost:4001/api/findUser\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      data.rooms.forEach(room => {\r\n        const data = {roomId: room}\r\n        fetch(\"http://localhost:4001/api/findRoom\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify(data)\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => setUserRooms(prevUserRooms => [...prevUserRooms, data]));\r\n      })\r\n    })\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"connected\", response => {\r\n      console.log(response);\r\n    });\r\n\r\n    socket.emit(\"joined_room\", roomId);\r\n\r\n    socket.on(\"message\", response => {\r\n      console.log(response);\r\n      setMessages(prevMessages => [...prevMessages, response]);\r\n    })\r\n  }, [roomId]);\r\n\r\n  useEffect(() => {\r\n    if(user && props.access_token) {\r\n      console.log(user);\r\n      fetch(`https://dev-pdp1v9a4.auth0.com/api/v2/users/${user.sub}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${props.access_token}`\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setFullUserInfo(data);\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n  }, [user, props.access_token])\r\n\r\n  useEffect(() => {\r\n    if(messages.length > 0) {\r\n      window.scrollTo(0, document.body.scrollHeight)\r\n    }\r\n  }, [messages])\r\n\r\n  function addMessage(messageInfo) {\r\n    socket.emit(\"sent_message\", messageInfo);\r\n  }\r\n\r\n  function toggleRoomNavSlide() {\r\n    setRoomNavSlide(prevRoomNavSlide => !prevRoomNavSlide);\r\n  }\r\n\r\n  function toggleUserNavSlide() {\r\n    setUserNavSlide(prevUserNavSlide => !prevUserNavSlide);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"chat-box\">\r\n        <RoomSideBar\r\n        setRoomNavSlide={setRoomNavSlide}\r\n        roomNavSlide={roomNavSlide}\r\n        username={fullUserInfo.username}\r\n        rooms={userRooms}\r\n        />\r\n\r\n        <main className=\"main\">\r\n          <NavBar\r\n          roomId={roomId}\r\n          toggleUserNavSlide={toggleUserNavSlide}\r\n          toggleRoomNavSlide={toggleRoomNavSlide}\r\n          roomName={roomName}\r\n          />\r\n\r\n\r\n          <MessageList messages={messages} roomName={roomName}/>\r\n          <Input\r\n          roomId={roomId}\r\n          username={fullUserInfo.username}\r\n          roomName={roomName}\r\n          onSubmit={addMessage}\r\n          className=\"input-field\"\r\n          />\r\n\r\n\r\n        </main>\r\n          <UserSideBar\r\n          roomName={roomName}\r\n          rooms={userRooms}\r\n          roomDescription={\"asdasd\"}\r\n          roomUsers={roomUsers}\r\n          userNavSlide={userNavSlide}\r\n          setUserNavSlide={setUserNavSlide}\r\n           />\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatApp;\r\n","import { createBrowserHistory } from \"history\";\r\nexport default createBrowserHistory();\r\n","import React, {useState, useEffect} from 'react';\nimport {Switch, Route, Router, useHistory} from 'react-router-dom';\nimport './App.css';\nimport Landing from './components/Landing';\nimport Home from './components/Home';\nimport ExternalApi from './views/ExternalApi';\nimport ChatApp from './components/ChatApp';\nimport RoomSideBar from './components/RoomSideBar';\nimport browserHistory from \"./utils/history\";\n\nimport { useAuth0 } from \"./react-auth0-spa\";\n\nfunction App() {\n  const [accessToken, setAccessToken] = useState(null);\n  const {loading, user, isAuthenticated, loginWithRedirect} = useAuth0();\n\n  useEffect(() => {\n    fetch(\"http://localhost:4001/api/getAccessToken\")\n    .then(response => response.json())\n    .then(data => {\n      console.log(data);\n      setAccessToken(data.access_token);\n    })\n    .catch(err => console.log(err))\n  }, []);\n\n  return (\n    <div className=\"app\">\n      <Router basename=\"/real-speak\" history={browserHistory}>\n        <Switch>\n          <Route path=\"/\" exact>\n            {!isAuthenticated ? <Landing/> : <Home access_token={accessToken}/>}\n          </Route>\n          <Route path=\"/chatapp/:roomName/:roomId\">\n            {user && <ChatApp access_token={accessToken}/>}\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Auth0Provider } from \"./react-auth0-spa\";\nimport config from \"./auth_config.json\";\nimport history from \"./utils/history\";\n\n// A function that routes the user to the right place\n// after login\nconst onRedirectCallback = appState => {\n  history.push(\n    appState && appState.targetUrl\n      ? appState.targetUrl\n      : window.location.pathname\n  );\n};\n\nReactDOM.render(\n  <Auth0Provider\n    domain={config.domain}\n    client_id={config.clientId}\n    redirect_uri={window.location.origin}\n    audience={config.audience}\n    onRedirectCallback={onRedirectCallback}\n  >\n    <App />\n  </Auth0Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}