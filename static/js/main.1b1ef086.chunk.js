(this["webpackJsonpreal-speak"]=this["webpackJsonpreal-speak"]||[]).push([[0],{257:function(e,t,a){e.exports=a(571)},262:function(e,t,a){},292:function(e,t){},317:function(e,t){},319:function(e,t){},327:function(e,t){},329:function(e,t){},344:function(e,t){},352:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=352},359:function(e,t){},360:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=360},395:function(e,t){},396:function(e,t){},477:function(e,t){},571:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(133),r=a.n(o),l=a(46),m=(a(262),a(19)),s=a.n(m),i=a(62),u=a(4),d=a(256),b=a(252),f=a.n(b),p=function(){return window.history.replaceState({},document.title,window.location.pathname)},h=c.a.createContext(),Z=function(){return Object(n.useContext)(h)};var N=function(){var e=Z().loginWithRedirect;return c.a.createElement("div",{className:"landing"},c.a.createElement("h1",{className:"logo"},"RealSpeak"),c.a.createElement("h2",{className:"landing-header"},"A new way to chat with your communities and friends."),c.a.createElement("p",{className:"landing-subtitle"},"RealSpeak is the easiest way to communicate over voice, video, and text, whether you\u2019re part of a school club, a nightly gaming group, a worldwide art community, or just a handful of friends that want to hang out."),c.a.createElement("button",{className:"landing-btn",onClick:function(){return e({})}},"Sign Up"))};var y=function(e){var t=Object(n.useState)(Math.floor(9999999*Math.random()+1e6)),a=Object(u.a)(t,2),o=a[0],r=(a[1],Object(n.useState)("")),m=Object(u.a)(r,2),s=m[0],i=m[1],d=Object(n.useState)(null),b=Object(u.a)(d,2),f=b[0],p=b[1],h=Object(l.f)(),N=Z().user;return Object(n.useEffect)((function(){N&&(console.log(N),fetch("https://dev-pdp1v9a4.auth0.com/api/v2/users/".concat(N.sub),{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IndXNS1zNTl2SXdYMkdOSGFCYTI1MyJ9.eyJpc3MiOiJodHRwczovL2Rldi1wZHAxdjlhNC5hdXRoMC5jb20vIiwic3ViIjoiOFlqeGlseDlxbGRuSGlwSHJ5RTgxZ3NiajA5cUxKYjZAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vZGV2LXBkcDF2OWE0LmF1dGgwLmNvbS9hcGkvdjIvIiwiaWF0IjoxNTkxODAxMzg0LCJleHAiOjE1OTE4ODc3ODQsImF6cCI6IjhZanhpbHg5cWxkbkhpcEhyeUU4MWdzYmowOXFMSmI2Iiwic2NvcGUiOiJyZWFkOmNsaWVudF9ncmFudHMgY3JlYXRlOmNsaWVudF9ncmFudHMgZGVsZXRlOmNsaWVudF9ncmFudHMgdXBkYXRlOmNsaWVudF9ncmFudHMgcmVhZDp1c2VycyB1cGRhdGU6dXNlcnMgZGVsZXRlOnVzZXJzIGNyZWF0ZTp1c2VycyByZWFkOnVzZXJzX2FwcF9tZXRhZGF0YSB1cGRhdGU6dXNlcnNfYXBwX21ldGFkYXRhIGRlbGV0ZTp1c2Vyc19hcHBfbWV0YWRhdGEgY3JlYXRlOnVzZXJzX2FwcF9tZXRhZGF0YSByZWFkOnVzZXJfY3VzdG9tX2Jsb2NrcyBjcmVhdGU6dXNlcl9jdXN0b21fYmxvY2tzIGRlbGV0ZTp1c2VyX2N1c3RvbV9ibG9ja3MgY3JlYXRlOnVzZXJfdGlja2V0cyByZWFkOmNsaWVudHMgdXBkYXRlOmNsaWVudHMgZGVsZXRlOmNsaWVudHMgY3JlYXRlOmNsaWVudHMgcmVhZDpjbGllbnRfa2V5cyB1cGRhdGU6Y2xpZW50X2tleXMgZGVsZXRlOmNsaWVudF9rZXlzIGNyZWF0ZTpjbGllbnRfa2V5cyByZWFkOmNvbm5lY3Rpb25zIHVwZGF0ZTpjb25uZWN0aW9ucyBkZWxldGU6Y29ubmVjdGlvbnMgY3JlYXRlOmNvbm5lY3Rpb25zIHJlYWQ6cmVzb3VyY2Vfc2VydmVycyB1cGRhdGU6cmVzb3VyY2Vfc2VydmVycyBkZWxldGU6cmVzb3VyY2Vfc2VydmVycyBjcmVhdGU6cmVzb3VyY2Vfc2VydmVycyByZWFkOmRldmljZV9jcmVkZW50aWFscyB1cGRhdGU6ZGV2aWNlX2NyZWRlbnRpYWxzIGRlbGV0ZTpkZXZpY2VfY3JlZGVudGlhbHMgY3JlYXRlOmRldmljZV9jcmVkZW50aWFscyByZWFkOnJ1bGVzIHVwZGF0ZTpydWxlcyBkZWxldGU6cnVsZXMgY3JlYXRlOnJ1bGVzIHJlYWQ6cnVsZXNfY29uZmlncyB1cGRhdGU6cnVsZXNfY29uZmlncyBkZWxldGU6cnVsZXNfY29uZmlncyByZWFkOmhvb2tzIHVwZGF0ZTpob29rcyBkZWxldGU6aG9va3MgY3JlYXRlOmhvb2tzIHJlYWQ6ZW1haWxfcHJvdmlkZXIgdXBkYXRlOmVtYWlsX3Byb3ZpZGVyIGRlbGV0ZTplbWFpbF9wcm92aWRlciBjcmVhdGU6ZW1haWxfcHJvdmlkZXIgYmxhY2tsaXN0OnRva2VucyByZWFkOnN0YXRzIHJlYWQ6dGVuYW50X3NldHRpbmdzIHVwZGF0ZTp0ZW5hbnRfc2V0dGluZ3MgcmVhZDpsb2dzIHJlYWQ6c2hpZWxkcyBjcmVhdGU6c2hpZWxkcyB1cGRhdGU6c2hpZWxkcyBkZWxldGU6c2hpZWxkcyByZWFkOmFub21hbHlfYmxvY2tzIGRlbGV0ZTphbm9tYWx5X2Jsb2NrcyB1cGRhdGU6dHJpZ2dlcnMgcmVhZDp0cmlnZ2VycyByZWFkOmdyYW50cyBkZWxldGU6Z3JhbnRzIHJlYWQ6Z3VhcmRpYW5fZmFjdG9ycyB1cGRhdGU6Z3VhcmRpYW5fZmFjdG9ycyByZWFkOmd1YXJkaWFuX2Vucm9sbG1lbnRzIGRlbGV0ZTpndWFyZGlhbl9lbnJvbGxtZW50cyBjcmVhdGU6Z3VhcmRpYW5fZW5yb2xsbWVudF90aWNrZXRzIHJlYWQ6dXNlcl9pZHBfdG9rZW5zIGNyZWF0ZTpwYXNzd29yZHNfY2hlY2tpbmdfam9iIGRlbGV0ZTpwYXNzd29yZHNfY2hlY2tpbmdfam9iIHJlYWQ6Y3VzdG9tX2RvbWFpbnMgZGVsZXRlOmN1c3RvbV9kb21haW5zIGNyZWF0ZTpjdXN0b21fZG9tYWlucyB1cGRhdGU6Y3VzdG9tX2RvbWFpbnMgcmVhZDplbWFpbF90ZW1wbGF0ZXMgY3JlYXRlOmVtYWlsX3RlbXBsYXRlcyB1cGRhdGU6ZW1haWxfdGVtcGxhdGVzIHJlYWQ6bWZhX3BvbGljaWVzIHVwZGF0ZTptZmFfcG9saWNpZXMgcmVhZDpyb2xlcyBjcmVhdGU6cm9sZXMgZGVsZXRlOnJvbGVzIHVwZGF0ZTpyb2xlcyByZWFkOnByb21wdHMgdXBkYXRlOnByb21wdHMgcmVhZDpicmFuZGluZyB1cGRhdGU6YnJhbmRpbmcgZGVsZXRlOmJyYW5kaW5nIHJlYWQ6bG9nX3N0cmVhbXMgY3JlYXRlOmxvZ19zdHJlYW1zIGRlbGV0ZTpsb2dfc3RyZWFtcyB1cGRhdGU6bG9nX3N0cmVhbXMgY3JlYXRlOnNpZ25pbmdfa2V5cyByZWFkOnNpZ25pbmdfa2V5cyB1cGRhdGU6c2lnbmluZ19rZXlzIHJlYWQ6bGltaXRzIHVwZGF0ZTpsaW1pdHMiLCJndHkiOiJjbGllbnQtY3JlZGVudGlhbHMifQ.aI6fca4a8v46vkYXxpem03NsOOuhsrtczKmlYzaUs9H2MJEp5I8mlpQ8N5Hf-jrRZKlYGun5mfyMJlyRWecmA-OsCYY9rzkGwq_ZLWzS4mEVmuihqJD6WZAhnsHuSpCnrIOguIrd2peCMSnhJbgqGvkhlVb3SKUTQLg-fmDeW1IichqxxITXvOKNa7XCZF7dOl6TLBy01OCzAy2vN-BNFgbHv4ZvL8vXUkPAeRmdziXUmJBaevLJ3NYLb12RyCpD3Vc-Jiofz9ADCyV-ot0ccJEcLgrECC5j3o686-WMlO9RkjJTy1UO0ac1cKW5ySGF0gIhW5GPVZAMw_5roLahrQ")}}).then((function(e){return e.json()})).then((function(e){p(e.username)})).catch((function(e){return console.log(e)})))}),[N]),Object(n.useEffect)((function(){if(N&&f){var e={userId:N.name};fetch("http://localhost:4001/api/findUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(e.isNewUser){i("General");var t={roomId:o,roomName:"General",userId:N.name,username:f};fetch("http://localhost:4001/api/createUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(){return h.push("/chatapp/".concat(s,"/").concat(o))})).catch((function(e){return console.log(e)}))}else{var a={roomId:e.rooms[0]};fetch("http://localhost:4001/api/findRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){console.log(e),h.push("/chatapp/".concat(e.roomName,"/").concat(e.roomId))})).catch((function(e){return console.log(e)}))}}))}}),[N,f]),c.a.createElement("div",null)},v=a(137),G=a(255),V=a.n(G);var O=a(61),W=a(25),R=a(24),g=a.n(R);g.a.setAppElement("#root");var Y=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],r=a[1];function l(){r(!1)}return c.a.createElement("div",{className:"delete-room-modal"},c.a.createElement("button",{className:"room-form-submit room-form-delete",onClick:function(e){e.preventDefault(),r(!0)}},"Delete Room"),c.a.createElement(g.a,{isOpen:o,onRequestClose:l,contentLabel:"Room Settings",className:"modal",overlayClassName:"overlay"},c.a.createElement("div",{className:"room-form-modal"},c.a.createElement("div",{className:"room-form-modal-header"},c.a.createElement("h2",{className:"room-form-header"},"Delete Room"),c.a.createElement("button",{className:"close-room-form",onClick:l},"X")),c.a.createElement("div",{className:"room-form-container delete-form-container"},c.a.createElement("p",{className:"delete-disclaimer"},"Are you sure you want to delete ",c.a.createElement("strong",null,"#",e.roomName),"?"),c.a.createElement("button",{className:"room-form-submit room-form-delete",onClick:e.deleteRoom},"Delete Room")))))};g.a.setAppElement("#root");var I=function(e){var t=Object(n.useState)({newUserID:"",userId:"",newRoomName:""}),a=Object(u.a)(t,2),o=a[0],r=a[1],m=Object(n.useState)(!1),s=Object(u.a)(m,2),i=s[0],d=s[1],b=Object(l.f)();function f(){d(!1)}function p(e){var t=e.target,a=t.value,n=t.name;r((function(e){return Object(W.a)({},e,Object(O.a)({},n,a))}))}return c.a.createElement("div",null,c.a.createElement("button",{className:"navbar-modal-btn",onClick:function(){d(!0)}},c.a.createElement("i",{className:"fas fa-ellipsis-v"})),c.a.createElement(g.a,{isOpen:i,onRequestClose:f,contentLabel:"Room Settings",className:"modal",overlayClassName:"overlay"},c.a.createElement("div",{className:"room-form-modal"},c.a.createElement("div",{className:"room-form-modal-header"},c.a.createElement("h2",{className:"room-form-header"},"Settings"),c.a.createElement("button",{className:"close-room-form",onClick:f},"X")),c.a.createElement("div",{className:"room-form-container"},c.a.createElement("form",{className:"room-form"},c.a.createElement("div",{className:"room-form-inputs"},c.a.createElement("div",{className:"input-item"},c.a.createElement("label",{className:"room-form-label",for:"userId"},"Add user"),c.a.createElement("input",{placeholder:"User Id (Email)",className:"input",id:"userId",onChange:p,value:o.userId,type:"text",name:"userId"})),c.a.createElement("button",{className:"room-form-submit",onClick:function(t){var a={userId:o.userId,roomId:e.roomId};t.preventDefault(),fetch("http://localhost:4001/api/addUserToRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),d(!1),r((function(e){return Object(W.a)({},e,{newUserId:""})}))}},"Add User"),c.a.createElement("div",{className:"input-item"},c.a.createElement("label",{className:"room-form-label",for:"userId"},"Remove user"),c.a.createElement("input",{placeholder:"User Id (Email)",className:"input",id:"userId",onChange:p,value:o.userId,type:"text",name:"userId"})),c.a.createElement("button",{className:"room-form-submit",onClick:function(t){t.preventDefault(),e.currentUser.removeUserFromRoom({userId:o.userId,roomId:e.currentRoomId}).catch((function(e){return console.log(e)})),d(!1),r((function(e){return Object(W.a)({},e,{userId:""})}))}},"Remove User"),c.a.createElement("div",{className:"input-item"},c.a.createElement("label",{className:"room-form-label",for:"newRoomName"},"Change room name"),c.a.createElement("input",{placeholder:"e.g. plan-event",className:"input",id:"newRoomName",onChange:p,value:o.newRoomName,type:"text",name:"newRoomName"})),c.a.createElement("button",{className:"room-form-submit",onClick:function(t){t.preventDefault(),o.newRoomName.length>0&&(e.currentUser.updateRoom({roomId:e.currentRoomId,name:o.newRoomName}).catch((function(e){return console.log(e)})),d(!1),r((function(e){return Object(W.a)({},e,{newRoomName:""})})),setTimeout((function(){window.location.reload()}),100))}},"Change Name"),c.a.createElement(Y,{roomName:e.roomName,deleteRoom:function(t){t.preventDefault(),d(!1);var a="";e.currentUser.deleteRoom({roomId:e.currentRoomId}).then((function(){e.currentUser.rooms.forEach((function(t){t.id!==e.currentRoomId&&(a=t.id,console.log(a))})),""===a?b.push("/"):b.push("/chatapp/".concat(a)),window.location.reload()}))}})))))))};var E=function(e){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header-content"},c.a.createElement("div",{className:"nav-container"},c.a.createElement("div",{className:"nav-adjacent"},c.a.createElement("button",{onClick:e.toggleRoomNavSlide,className:"open-room-side-nav"},c.a.createElement("i",{className:"fas fa-bars"})),c.a.createElement("h2",{className:"room-header"},"# ",e.roomName)),c.a.createElement("nav",{className:"nav"},c.a.createElement("ul",{className:"nav-list"},c.a.createElement("li",{className:"nav-item open-user-side-nav",onClick:e.toggleUserNavSlide},c.a.createElement("i",{className:"fas fa-user-friends"})),c.a.createElement(I,{roomName:e.roomName,roomId:e.roomId,currentUser:e.currentUser}))))))},X=a(60);g.a.setAppElement("#root");var j=function(e){var t=Z().user,a=Object(n.useState)(!1),o=Object(u.a)(a,2),r=o[0],l=o[1],m=Object(n.useState)({roomName:"",roomDescription:""}),s=Object(u.a)(m,2),i=s[0],d=s[1];function b(){l(!1)}function f(e){var t=e.target,a=t.value,n=t.name;d((function(e){return Object(W.a)({},e,Object(O.a)({},n,a))}))}return c.a.createElement("div",null,c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{onClick:function(){l(!0)},className:"sidebar-modal-header"},"+ Add a room"),c.a.createElement(g.a,{isOpen:r,onRequestClose:b,contentLabel:"Create Room Form",className:"modal",overlayClassName:"overlay"},c.a.createElement("div",{className:"room-form-modal"},c.a.createElement("div",{className:"room-form-modal-header"},c.a.createElement("h2",{className:"room-form-header"},"Create Room"),c.a.createElement("button",{className:"close-room-form",onClick:b},"X")),c.a.createElement("div",{className:"room-form-container"},c.a.createElement("form",{className:"room-form"},c.a.createElement("div",{className:"room-form-inputs"},c.a.createElement("div",{className:"input-item"},c.a.createElement("label",{className:"room-form-label",for:"roomName"},"Name"),c.a.createElement("input",{maxlength:"25",className:"input",id:"roomName",onChange:f,value:i.roomName,required:!0,type:"text",name:"roomName"})),c.a.createElement("div",{className:"input-item"},c.a.createElement("label",{className:"room-form-label",for:"roomDescription"},"Description (Optional)"),c.a.createElement("input",{maxlength:"75",className:"input",id:"roomDescription",onChange:f,value:i.roomDescription,type:"text",name:"roomDescription"}))),c.a.createElement("button",{className:"room-form-submit",onClick:function(a){var n=Math.floor(9999999*Math.random()+1e6),c=i.roomName,o={userId:t.name,roomId:n,roomName:c,username:e.username};a.preventDefault(),fetch("http://localhost:4001/api/updateUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),l(!1),setTimeout((function(){window.location.reload()}),100)}},"Create Room")))))))},k=a(136);g.a.setAppElement("#root");var F=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),o=a[0],r=a[1],l=Object(n.useState)(""),m=Object(u.a)(l,2),s=m[0],i=m[1],d=Object(n.useState)(!1),b=Object(u.a)(d,2),f=b[0],p=b[1];function h(){p(!1)}return Object(n.useEffect)((function(){new k.ChatManager({instanceLocator:"v1:us1:e7565616-0e2a-4936-9ada-394d97403d4d",userId:e.currentId,tokenProvider:new k.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/e7565616-0e2a-4936-9ada-394d97403d4d/token"})}).connect().then((function(e){r(e)})).catch((function(e){return console.log(e)}))}),[]),c.a.createElement("div",null,!(null===o)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{onClick:function(){p(!0)},className:"sidebar-modal-header"},"+ Join room"),c.a.createElement(g.a,{isOpen:f,onRequestClose:h,contentLabel:"Room Settings",className:"modal",overlayClassName:"overlay"},c.a.createElement("div",{className:"room-form-modal"},c.a.createElement("div",{className:"room-form-modal-header"},c.a.createElement("h2",{className:"room-form-header"},"Join Room"),c.a.createElement("button",{className:"close-room-form",onClick:h},"X")),c.a.createElement("div",{className:"room-form-container"},c.a.createElement("form",{className:"room-form"},c.a.createElement("div",{className:"room-form-inputs"},c.a.createElement("div",{className:"input-item"},c.a.createElement("label",{className:"room-form-label",for:"roomId"},"Room Id"),c.a.createElement("input",{className:"input",id:"roomId",onChange:function(e){var t=e.target.value;i(t)},value:s,required:!0,type:"text",name:"roomId"}))),c.a.createElement("button",{className:"room-form-submit",onClick:function(e){e.preventDefault(),o.joinRoom({roomId:s}).catch((function(e){return console.log(e)})),p(!1),window.location.reload()}},"Join Room")))))))};var J=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),o=(a[0],a[1],Z()),r=o.isAuthenticated,l=o.loginWithRedirect,m=o.logout,s=o.user;function i(){setTimeout((function(){window.location.reload()}),10)}return Object(n.useEffect)((function(){function t(){e.setRoomNavSlide(!1)}return document.body.addEventListener("click",t),function(){return document.body.removeEventListener("click",t)}}),[]),c.a.createElement("div",{className:"room-side-bar"},c.a.createElement("div",{className:"room-side-bar-content"},c.a.createElement("nav",{className:"room-side-nav ".concat(e.roomNavSlide?"room-side-nav-open":"")},c.a.createElement("div",{className:"room-side-nav-content"},c.a.createElement("h3",{className:"room-side-nav-list-header"},"Rooms"),c.a.createElement("ul",{className:"room-side-nav-list"},e.rooms.map((function(e){return c.a.createElement("li",{key:e.roomId,onClick:i,className:"room-side-nav-item"},c.a.createElement(X.a,{className:"link",to:"/chatapp/".concat(e.roomName,"/").concat(e.roomId)},"# ",e.roomName))})),s&&c.a.createElement(j,{username:e.username,currentId:s.name}),s&&c.a.createElement(F,{currentId:s.name}))),!r&&c.a.createElement("button",{onClick:function(){return l({})}},"Log in"),r&&c.a.createElement("button",{className:"logout-btn",onClick:function(){return m()}},"Log out"))))};var B=function(e){return Object(n.useEffect)((function(){function t(){e.setUserNavSlide(!1)}return document.body.addEventListener("click",t),function(){return document.body.removeEventListener("click",t)}}),[]),c.a.createElement("div",{className:"user-side-bar"},c.a.createElement("div",{className:"user-side-bar-content"},c.a.createElement("nav",{className:"user-side-nav ".concat(e.userNavSlide?"user-side-nav-open":"")},c.a.createElement("div",{className:"user-side-nav-content"},c.a.createElement("h3",{className:"user-side-nav-list-header"},"# ",e.roomName),c.a.createElement("p",{className:"user-side-nav-room-description"},e.roomDescription),c.a.createElement("h3",{className:"user-side-nav-list-header"},"Members"),c.a.createElement("ul",{className:"user-side-nav-list"},e.roomUsers.map((function(e){return c.a.createElement("li",{key:e.id,className:"user-side-nav-item"}," ",e.username)})))))))};var x=function(e){return c.a.createElement("ul",{className:"message-list"},0===e.messages.length&&c.a.createElement("li",{className:"message-welcome"},c.a.createElement("h2",{className:"room-header"},"# ",e.roomName),c.a.createElement("p",null,"Welcome to the ",c.a.createElement("strong",null,"# ",e.roomName)," room!")),e.messages.map((function(e,t){return c.a.createElement("li",{className:"message-item",key:t},c.a.createElement("div",{className:"message-item-content"},c.a.createElement("h3",{className:"message-sender"},e.username),c.a.createElement("p",{className:"message-text"},e.text)))})),c.a.createElement("li",null))};var z=function(e){var t=Object(n.useState)({username:"",timeSent:"",text:"",roomId:""}),a=Object(u.a)(t,2),o=a[0],r=a[1];return Object(n.useEffect)((function(){e.username&&r((function(t){return Object(W.a)({},t,{username:e.username})})),e.roomId&&r((function(t){return Object(W.a)({},t,{roomId:e.roomId})}))}),[e.username,e.roomId]),c.a.createElement("div",{className:"form-container"},c.a.createElement("div",{className:"form-content"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(o),r((function(e){return Object(W.a)({},e,{timeSent:"",text:""})}))},className:"input-field"},c.a.createElement("input",{type:"text",className:"message-input",onChange:function(e){var t=e.target.value;r((function(e){return Object(W.a)({},e,{text:t})}))},value:o.text,placeholder:"Message #".concat(e.roomName)}),c.a.createElement("button",{className:"message-submit"},c.a.createElement("i",{className:"fas fa-paper-plane"})))))};var U=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),o=a[0],r=a[1],m=Object(n.useState)([]),s=Object(u.a)(m,2),i=s[0],d=s[1],b=Object(n.useState)([]),f=Object(u.a)(b,2),p=f[0],h=f[1],N=Object(n.useState)(null),y=Object(u.a)(N,2),G=y[0],O=(y[1],Object(n.useState)({users:[]})),W=Object(u.a)(O,2),R=(W[0],W[1],Object(n.useState)([])),g=Object(u.a)(R,2),Y=g[0],I=g[1],X=Object(n.useState)([]),j=Object(u.a)(X,2),k=(j[0],j[1],Object(n.useState)(!1)),F=Object(u.a)(k,2),U=F[0],w=F[1],H=Object(n.useState)(!1),S=Object(u.a)(H,2),C=S[0],M=S[1],T=Object(l.g)().roomId,D=Object(l.g)().roomName,L=Z().user,A=V()("http://127.0.0.1:4001");return Object(n.useEffect)((function(){var e={roomId:T};fetch("http://localhost:4001/api/findRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e.users),h(e.users)}))}),[]),Object(n.useEffect)((function(){var e={userId:L.name};fetch("http://localhost:4001/api/findUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.rooms.forEach((function(e){var t={roomId:e};fetch("http://localhost:4001/api/findRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return d((function(t){return[].concat(Object(v.a)(t),[e])}))}))}))}))}),[]),Object(n.useEffect)((function(){A.on("connected",(function(e){console.log(e)})),A.emit("joined_room",T),A.on("message",(function(e){console.log(e),I((function(t){return[].concat(Object(v.a)(t),[e])}))}))}),[T]),Object(n.useEffect)((function(){L&&(console.log(L),fetch("https://dev-pdp1v9a4.auth0.com/api/v2/users/".concat(L.sub),{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IndXNS1zNTl2SXdYMkdOSGFCYTI1MyJ9.eyJpc3MiOiJodHRwczovL2Rldi1wZHAxdjlhNC5hdXRoMC5jb20vIiwic3ViIjoiOFlqeGlseDlxbGRuSGlwSHJ5RTgxZ3NiajA5cUxKYjZAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vZGV2LXBkcDF2OWE0LmF1dGgwLmNvbS9hcGkvdjIvIiwiaWF0IjoxNTkxODAxMzg0LCJleHAiOjE1OTE4ODc3ODQsImF6cCI6IjhZanhpbHg5cWxkbkhpcEhyeUU4MWdzYmowOXFMSmI2Iiwic2NvcGUiOiJyZWFkOmNsaWVudF9ncmFudHMgY3JlYXRlOmNsaWVudF9ncmFudHMgZGVsZXRlOmNsaWVudF9ncmFudHMgdXBkYXRlOmNsaWVudF9ncmFudHMgcmVhZDp1c2VycyB1cGRhdGU6dXNlcnMgZGVsZXRlOnVzZXJzIGNyZWF0ZTp1c2VycyByZWFkOnVzZXJzX2FwcF9tZXRhZGF0YSB1cGRhdGU6dXNlcnNfYXBwX21ldGFkYXRhIGRlbGV0ZTp1c2Vyc19hcHBfbWV0YWRhdGEgY3JlYXRlOnVzZXJzX2FwcF9tZXRhZGF0YSByZWFkOnVzZXJfY3VzdG9tX2Jsb2NrcyBjcmVhdGU6dXNlcl9jdXN0b21fYmxvY2tzIGRlbGV0ZTp1c2VyX2N1c3RvbV9ibG9ja3MgY3JlYXRlOnVzZXJfdGlja2V0cyByZWFkOmNsaWVudHMgdXBkYXRlOmNsaWVudHMgZGVsZXRlOmNsaWVudHMgY3JlYXRlOmNsaWVudHMgcmVhZDpjbGllbnRfa2V5cyB1cGRhdGU6Y2xpZW50X2tleXMgZGVsZXRlOmNsaWVudF9rZXlzIGNyZWF0ZTpjbGllbnRfa2V5cyByZWFkOmNvbm5lY3Rpb25zIHVwZGF0ZTpjb25uZWN0aW9ucyBkZWxldGU6Y29ubmVjdGlvbnMgY3JlYXRlOmNvbm5lY3Rpb25zIHJlYWQ6cmVzb3VyY2Vfc2VydmVycyB1cGRhdGU6cmVzb3VyY2Vfc2VydmVycyBkZWxldGU6cmVzb3VyY2Vfc2VydmVycyBjcmVhdGU6cmVzb3VyY2Vfc2VydmVycyByZWFkOmRldmljZV9jcmVkZW50aWFscyB1cGRhdGU6ZGV2aWNlX2NyZWRlbnRpYWxzIGRlbGV0ZTpkZXZpY2VfY3JlZGVudGlhbHMgY3JlYXRlOmRldmljZV9jcmVkZW50aWFscyByZWFkOnJ1bGVzIHVwZGF0ZTpydWxlcyBkZWxldGU6cnVsZXMgY3JlYXRlOnJ1bGVzIHJlYWQ6cnVsZXNfY29uZmlncyB1cGRhdGU6cnVsZXNfY29uZmlncyBkZWxldGU6cnVsZXNfY29uZmlncyByZWFkOmhvb2tzIHVwZGF0ZTpob29rcyBkZWxldGU6aG9va3MgY3JlYXRlOmhvb2tzIHJlYWQ6ZW1haWxfcHJvdmlkZXIgdXBkYXRlOmVtYWlsX3Byb3ZpZGVyIGRlbGV0ZTplbWFpbF9wcm92aWRlciBjcmVhdGU6ZW1haWxfcHJvdmlkZXIgYmxhY2tsaXN0OnRva2VucyByZWFkOnN0YXRzIHJlYWQ6dGVuYW50X3NldHRpbmdzIHVwZGF0ZTp0ZW5hbnRfc2V0dGluZ3MgcmVhZDpsb2dzIHJlYWQ6c2hpZWxkcyBjcmVhdGU6c2hpZWxkcyB1cGRhdGU6c2hpZWxkcyBkZWxldGU6c2hpZWxkcyByZWFkOmFub21hbHlfYmxvY2tzIGRlbGV0ZTphbm9tYWx5X2Jsb2NrcyB1cGRhdGU6dHJpZ2dlcnMgcmVhZDp0cmlnZ2VycyByZWFkOmdyYW50cyBkZWxldGU6Z3JhbnRzIHJlYWQ6Z3VhcmRpYW5fZmFjdG9ycyB1cGRhdGU6Z3VhcmRpYW5fZmFjdG9ycyByZWFkOmd1YXJkaWFuX2Vucm9sbG1lbnRzIGRlbGV0ZTpndWFyZGlhbl9lbnJvbGxtZW50cyBjcmVhdGU6Z3VhcmRpYW5fZW5yb2xsbWVudF90aWNrZXRzIHJlYWQ6dXNlcl9pZHBfdG9rZW5zIGNyZWF0ZTpwYXNzd29yZHNfY2hlY2tpbmdfam9iIGRlbGV0ZTpwYXNzd29yZHNfY2hlY2tpbmdfam9iIHJlYWQ6Y3VzdG9tX2RvbWFpbnMgZGVsZXRlOmN1c3RvbV9kb21haW5zIGNyZWF0ZTpjdXN0b21fZG9tYWlucyB1cGRhdGU6Y3VzdG9tX2RvbWFpbnMgcmVhZDplbWFpbF90ZW1wbGF0ZXMgY3JlYXRlOmVtYWlsX3RlbXBsYXRlcyB1cGRhdGU6ZW1haWxfdGVtcGxhdGVzIHJlYWQ6bWZhX3BvbGljaWVzIHVwZGF0ZTptZmFfcG9saWNpZXMgcmVhZDpyb2xlcyBjcmVhdGU6cm9sZXMgZGVsZXRlOnJvbGVzIHVwZGF0ZTpyb2xlcyByZWFkOnByb21wdHMgdXBkYXRlOnByb21wdHMgcmVhZDpicmFuZGluZyB1cGRhdGU6YnJhbmRpbmcgZGVsZXRlOmJyYW5kaW5nIHJlYWQ6bG9nX3N0cmVhbXMgY3JlYXRlOmxvZ19zdHJlYW1zIGRlbGV0ZTpsb2dfc3RyZWFtcyB1cGRhdGU6bG9nX3N0cmVhbXMgY3JlYXRlOnNpZ25pbmdfa2V5cyByZWFkOnNpZ25pbmdfa2V5cyB1cGRhdGU6c2lnbmluZ19rZXlzIHJlYWQ6bGltaXRzIHVwZGF0ZTpsaW1pdHMiLCJndHkiOiJjbGllbnQtY3JlZGVudGlhbHMifQ.aI6fca4a8v46vkYXxpem03NsOOuhsrtczKmlYzaUs9H2MJEp5I8mlpQ8N5Hf-jrRZKlYGun5mfyMJlyRWecmA-OsCYY9rzkGwq_ZLWzS4mEVmuihqJD6WZAhnsHuSpCnrIOguIrd2peCMSnhJbgqGvkhlVb3SKUTQLg-fmDeW1IichqxxITXvOKNa7XCZF7dOl6TLBy01OCzAy2vN-BNFgbHv4ZvL8vXUkPAeRmdziXUmJBaevLJ3NYLb12RyCpD3Vc-Jiofz9ADCyV-ot0ccJEcLgrECC5j3o686-WMlO9RkjJTy1UO0ac1cKW5ySGF0gIhW5GPVZAMw_5roLahrQ")}}).then((function(e){return e.json()})).then((function(e){r(e)})).catch((function(e){return console.log(e)})))}),[L]),Object(n.useEffect)((function(){Y.length>0&&window.scrollTo(0,document.body.scrollHeight)}),[Y]),c.a.createElement("div",null,c.a.createElement("div",{className:"chat-box"},c.a.createElement(J,{setRoomNavSlide:w,roomNavSlide:U,currentId:e.currentId,username:o.username,rooms:i}),c.a.createElement("main",{className:"main"},c.a.createElement(E,{roomId:T,currentUser:G,toggleUserNavSlide:function(){M((function(e){return!e}))},toggleRoomNavSlide:function(){w((function(e){return!e}))},roomName:D}),c.a.createElement(x,{messages:Y,roomName:D}),c.a.createElement(z,{roomId:T,username:o.username,roomName:D,className:"input-field",onSubmit:function(e){A.emit("sent_message",e)}})),c.a.createElement(B,{roomName:D,rooms:i,roomDescription:"asdasd",roomUsers:p,userNavSlide:C,setUserNavSlide:M})))},w=a(20),H=Object(w.a)();a(304);var S=function(){var e=Z(),t=(e.loading,e.user),a=e.isAuthenticated;return e.loginWithRedirect,c.a.createElement("div",{className:"app"},c.a.createElement(l.b,{basename:"/real-speak",history:H},c.a.createElement(l.c,null,c.a.createElement(l.a,{path:"/",exact:!0},a?c.a.createElement(y,null):c.a.createElement(N,null)),c.a.createElement(l.a,{path:"/chatapp/:roomName/:roomId"},t&&c.a.createElement(U,{currentId:t.name})))))},C=a(92);r.a.render(c.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,o=void 0===a?p:a,r=Object(d.a)(e,["children","onRedirectCallback"]),l=Object(n.useState)(),m=Object(u.a)(l,2),b=m[0],Z=m[1],N=Object(n.useState)(),y=Object(u.a)(N,2),v=y[0],G=y[1],V=Object(n.useState)(),O=Object(u.a)(V,2),W=O[0],R=O[1],g=Object(n.useState)(!0),Y=Object(u.a)(g,2),I=Y[0],E=Y[1],X=Object(n.useState)(!1),j=Object(u.a)(X,2),k=j[0],F=j[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()(r);case 2:if(t=e.sent,R(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,o(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(c=e.sent,Z(c),!c){e.next=19;break}return e.next=17,t.getUser();case 17:l=e.sent,G(l);case 19:E(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var J=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},F(!0),e.prev=2,e.next=5,W.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,F(!1),e.finish(10);case 13:return e.next=15,W.getUser();case 15:a=e.sent,G(a),Z(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,W.handleRedirectCallback();case 3:return e.next=5,W.getUser();case 5:t=e.sent,E(!1),Z(!0),G(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(h.Provider,{value:{isAuthenticated:b,user:v,loading:I,popupOpen:k,loginWithPopup:J,handleRedirectCallback:B,getIdTokenClaims:function(){return W.getIdTokenClaims.apply(W,arguments)},loginWithRedirect:function(){return W.loginWithRedirect.apply(W,arguments)},getTokenSilently:function(){return W.getTokenSilently.apply(W,arguments)},getTokenWithPopup:function(){return W.getTokenWithPopup.apply(W,arguments)},logout:function(){return W.logout.apply(W,arguments)}}},t)}),{domain:C.domain,client_id:C.clientId,redirect_uri:"https://oscar-ornelas.github.io/real-speak",audience:C.audience,onRedirectCallback:function(e){H.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},c.a.createElement(S,null)),document.getElementById("root"))},92:function(e){e.exports=JSON.parse('{"domain":"dev-pdp1v9a4.auth0.com","clientId":"iu4i9gEVNZSkkHr3pb43fh3voHFzYPDd"}')}},[[257,1,2]]]);
//# sourceMappingURL=main.1b1ef086.chunk.js.map