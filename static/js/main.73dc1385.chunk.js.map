{"version":3,"sources":["../node_modules/keyv/src sync","../node_modules/got/source sync","react-auth0-spa.js","components/Landing.js","components/Home.js","views/useApiCall.js","components/DeleteRoomForm.js","components/RoomSettingsForm.js","components/NavBar.js","components/CreateRoomForm.js","components/JoinRoomForm.js","components/RoomSideBar.js","components/UserSideBar.js","components/MessageList.js","components/Input.js","components/ChatApp.js","utils/history.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","title","location","pathname","Auth0Context","React","createContext","useAuth0","useContext","Landing","loginWithRedirect","className","onClick","Home","props","useState","Math","floor","random","roomId","roomName","setRoomName","username","setUsername","useHistory","user","useEffect","console","log","fetch","sub","headers","Authorization","process","then","response","json","data","catch","err","userId","name","method","body","JSON","stringify","responseData","isNewUser","push","rooms","useApiCall","Modal","setAppElement","DeleteRoomForm","modalIsOpen","setIsOpen","closeModal","preventDefault","isOpen","onRequestClose","contentLabel","overlayClassName","deleteRoom","RoomSettingsForm","newUserID","newRoomName","formData","setFormData","handleChange","target","value","prevFormData","for","placeholder","onChange","type","newUserId","currentUser","removeUserFromRoom","currentRoomId","length","updateRoom","setTimeout","reload","newRoomId","forEach","room","NavBar","toggleRoomNavSlide","toggleUserNavSlide","CreateRoomForm","roomDescription","maxlength","required","JoinRoomForm","setCurrentUser","setRoomId","ChatManager","instanceLocator","currentId","tokenProvider","TokenProvider","url","connect","error","joinRoom","RoomSideBar","isAuthenticated","logout","reloadPage","removeRoomNavSlide","setRoomNavSlide","addEventListener","removeEventListener","roomNavSlide","map","key","to","UserSideBar","removeUserNavSlide","setUserNavSlide","userNavSlide","roomUsers","MessageList","messages","message","index","text","Input","timeSent","messageInfo","setMessageInfo","prevMessageInfo","onSubmit","ChatApp","fullUserInfo","setFullUserInfo","userRooms","setUserRooms","setRoomUsers","users","setMessages","useParams","socket","socketIOClient","prevUserRooms","on","emit","prevMessages","scrollTo","scrollHeight","prevUserNavSlide","prevRoomNavSlide","createBrowserHistory","App","loading","basename","browserHistory","path","exact","ReactDOM","render","children","onRedirectCallback","initOptions","setIsAuthenticated","setUser","auth0Client","setAuth0","setLoading","popupOpen","setPopupOpen","a","createAuth0Client","auth0FromHook","search","includes","handleRedirectCallback","appState","getUser","initAuth0","loginWithPopup","params","Provider","getIdTokenClaims","getTokenSilently","getTokenWithPopup","domain","config","client_id","clientId","redirect_uri","origin","audience","targetUrl","getElementById"],"mappings":"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","file":"static/js/main.73dc1385.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 352;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 360;","import React, { useState, useEffect, useContext } from \"react\";\r\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\r\n\r\nconst DEFAULT_REDIRECT_CALLBACK = () =>\r\n  window.history.replaceState({}, document.title, window.location.pathname);\r\n\r\nexport const Auth0Context = React.createContext();\r\nexport const useAuth0 = () => useContext(Auth0Context);\r\nexport const Auth0Provider = ({\r\n  children,\r\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\r\n  ...initOptions\r\n}) => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState();\r\n  const [user, setUser] = useState();\r\n  const [auth0Client, setAuth0] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const initAuth0 = async () => {\r\n      const auth0FromHook = await createAuth0Client(initOptions);\r\n      setAuth0(auth0FromHook);\r\n\r\n      if (window.location.search.includes(\"code=\") &&\r\n          window.location.search.includes(\"state=\")) {\r\n        const { appState } = await auth0FromHook.handleRedirectCallback();\r\n        onRedirectCallback(appState);\r\n      }\r\n\r\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\r\n\r\n      setIsAuthenticated(isAuthenticated);\r\n\r\n      if (isAuthenticated) {\r\n        const user = await auth0FromHook.getUser();\r\n        setUser(user);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n    initAuth0();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const loginWithPopup = async (params = {}) => {\r\n    setPopupOpen(true);\r\n    try {\r\n      await auth0Client.loginWithPopup(params);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setPopupOpen(false);\r\n    }\r\n    const user = await auth0Client.getUser();\r\n    setUser(user);\r\n    setIsAuthenticated(true);\r\n  };\r\n\r\n  const handleRedirectCallback = async () => {\r\n    setLoading(true);\r\n    await auth0Client.handleRedirectCallback();\r\n    const user = await auth0Client.getUser();\r\n    setLoading(false);\r\n    setIsAuthenticated(true);\r\n    setUser(user);\r\n  };\r\n  return (\r\n    <Auth0Context.Provider\r\n      value={{\r\n        isAuthenticated,\r\n        user,\r\n        loading,\r\n        popupOpen,\r\n        loginWithPopup,\r\n        handleRedirectCallback,\r\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\r\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\r\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\r\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\r\n        logout: (...p) => auth0Client.logout(...p)\r\n      }}\r\n    >\r\n      {children}\r\n    </Auth0Context.Provider>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\n\r\nfunction Landing() {\r\n  const {loginWithRedirect} = useAuth0();\r\n\r\n  return (\r\n    <div className=\"landing\">\r\n      <h1 className=\"logo\">RealSpeak</h1>\r\n      <h2 className=\"landing-header\">A new way to chat with your communities and friends.</h2>\r\n      <p className=\"landing-subtitle\">RealSpeak is the easiest way to communicate over voice, video, and text,\r\n      whether youâ€™re part of a school club, a nightly gaming group, a worldwide\r\n      art community, or just a handful of friends that want to hang out.\r\n      </p>\r\n      <button className=\"landing-btn\" onClick={() => loginWithRedirect({})}>Sign Up</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Landing;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {useHistory, Redirect} from 'react-router-dom';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\n\r\nfunction Home(props) {\r\n  const token = process.env.REACT_APP_MGMT_API_ACCESS_TOKEN;\r\n  const [roomId, setRoomId] = useState(Math.floor((Math.random() * 9999999) + 1000000));\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [username, setUsername] = useState(null);\r\n  const history = useHistory();\r\n  const {user} = useAuth0();\r\n\r\n  useEffect(() => {\r\n\r\n    if(user) {\r\n      console.log(user);\r\n      fetch(`https://dev-pdp1v9a4.auth0.com/api/v2/users/${user.sub}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setUsername(data.username);\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n  }, [user])\r\n\r\n  useEffect(() => {\r\n    if(user && username) {\r\n      const data = {userId: user.name};\r\n      fetch(\"http://localhost:4001/api/findUser\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseData => {\r\n        if(responseData.isNewUser) {\r\n          setRoomName(\"General\");\r\n          const data = {roomId, roomName: \"General\", userId: user.name, username};\r\n          fetch(\"http://localhost:4001/api/createUser\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n          })\r\n          .then(() => history.push(`/chatapp/${roomName}/${roomId}`))\r\n          .catch(err => console.log(err))\r\n        } else {\r\n          const data = {roomId: responseData.rooms[0]};\r\n          fetch(\"http://localhost:4001/api/findRoom\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n          })\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            console.log(data);\r\n            history.push(`/chatapp/${data.roomName}/${data.roomId}`)\r\n          })\r\n          .catch(err => console.log(err))\r\n        }\r\n      });\r\n    }\r\n  }, [user, username]);\r\n\r\n  return (\r\n    <div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Home;\r\n","import {useState, useEffect} from 'react';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\n\r\nfunction useApiCall() {\r\n  const { getTokenSilently } = useAuth0();\r\n  const [apiInfo, setApiInfo] = useState({});\r\n  const [token, setToken] = useState(null);\r\n\r\n\r\n  getTokenSilently()\r\n  .then(accessToken => {\r\n    setToken(accessToken);\r\n    setApiInfo({access_token: accessToken, expires_in: 84600})\r\n  });\r\n\r\n  const jsonApiInfo = JSON.stringify(apiInfo);\r\n\r\n  return jsonApiInfo;\r\n\r\n}\r\n\r\nexport default useApiCall;\r\n","import React, {useState} from 'react';\r\nimport Modal from 'react-modal';\r\nModal.setAppElement('#root');\r\n\r\nfunction DeleteRoomForm(props) {\r\n  const [modalIsOpen,setIsOpen] = useState(false);\r\n\r\n  function openModal(e) {\r\n    e.preventDefault();\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function closeModal(){\r\n    setIsOpen(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"delete-room-modal\">\r\n      <button className=\"room-form-submit room-form-delete\" onClick={openModal}>Delete Room</button>\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={closeModal}\r\n        contentLabel=\"Room Settings\"\r\n        className=\"modal\"\r\n        overlayClassName=\"overlay\"\r\n      >\r\n        <div className=\"room-form-modal\">\r\n          <div className=\"room-form-modal-header\">\r\n            <h2 className=\"room-form-header\">Delete Room</h2>\r\n            <button className=\"close-room-form\" onClick={closeModal}>X</button>\r\n          </div>\r\n\r\n          <div className=\"room-form-container delete-form-container\">\r\n            <p className=\"delete-disclaimer\">Are you sure you want to delete <strong>#{props.roomName}</strong>?</p>\r\n            <button className=\"room-form-submit room-form-delete\" onClick={props.deleteRoom}>Delete Room</button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DeleteRoomForm;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nimport DeleteRoomForm from './DeleteRoomForm';\r\nModal.setAppElement('#root');\r\n\r\nfunction RoomSettingsForm(props) {\r\n  const [formData, setFormData] = useState({newUserID: \"\", userId: \"\", newRoomName: \"\"});\r\n  const [modalIsOpen,setIsOpen] = useState(false);\r\n  const history = useHistory();\r\n\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function closeModal(){\r\n    setIsOpen(false);\r\n  }\r\n\r\n  function handleChange(e) {\r\n    const {value, name} = e.target;\r\n    setFormData(prevFormData => ({...prevFormData, [name]: value}));\r\n  }\r\n\r\n  function addUser(e) {\r\n    const data = {userId: formData.userId, roomId: props.roomId};\r\n    e.preventDefault();\r\n    fetch(\"http://localhost:4001/api/addUserToRoom\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    setIsOpen(false);\r\n    setFormData(prevFormData => ({...prevFormData, newUserId: \"\"}));\r\n  }\r\n\r\n  function removeUser(e) {\r\n    e.preventDefault();\r\n    props.currentUser.removeUserFromRoom({\r\n      userId: formData.userId,\r\n      roomId: props.currentRoomId\r\n    })\r\n    .catch(err => console.log(err))\r\n    setIsOpen(false);\r\n    setFormData(prevFormData => ({...prevFormData, userId: \"\"}));\r\n  }\r\n\r\n  function changeRoomName(e) {\r\n    e.preventDefault();\r\n    if(formData.newRoomName.length > 0) {\r\n      props.currentUser.updateRoom({\r\n        roomId: props.currentRoomId,\r\n        name: formData.newRoomName\r\n      })\r\n      .catch(err => console.log(err))\r\n      setIsOpen(false);\r\n      setFormData(prevFormData => ({...prevFormData, newRoomName: \"\"}));\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  function deleteRoom(e) {\r\n    e.preventDefault();\r\n    setIsOpen(false);\r\n    let newRoomId = \"\";\r\n    props.currentUser.deleteRoom({roomId: props.currentRoomId})\r\n    .then(() => {\r\n      props.currentUser.rooms.forEach(room => {\r\n        if(room.id !== props.currentRoomId) {\r\n          newRoomId = room.id;\r\n          console.log(newRoomId);\r\n        }\r\n      })\r\n      newRoomId === \"\" ? history.push(\"/\") : history.push(`/chatapp/${newRoomId}`);\r\n      window.location.reload();\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <button className=\"navbar-modal-btn\" onClick={openModal}><i className=\"fas fa-ellipsis-v\"></i></button>\r\n\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={closeModal}\r\n        contentLabel=\"Room Settings\"\r\n        className=\"modal\"\r\n        overlayClassName=\"overlay\"\r\n      >\r\n        <div className=\"room-form-modal\">\r\n          <div className=\"room-form-modal-header\">\r\n            <h2 className=\"room-form-header\">Settings</h2>\r\n            <button className=\"close-room-form\" onClick={closeModal}>X</button>\r\n          </div>\r\n          <div className=\"room-form-container\">\r\n            <form className=\"room-form\">\r\n              <div className=\"room-form-inputs\">\r\n\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"userId\">Add user</label>\r\n                  <input\r\n                    placeholder=\"User Id (Email)\"\r\n                    className=\"input\"\r\n                    id=\"userId\"\r\n                    onChange={handleChange}\r\n                    value={formData.userId}\r\n                    type=\"text\"\r\n                    name=\"userId\"\r\n                  />\r\n                </div>\r\n                <button className=\"room-form-submit\" onClick={addUser}>Add User</button>\r\n\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"userId\">Remove user</label>\r\n                  <input\r\n                    placeholder=\"User Id (Email)\"\r\n                    className=\"input\"\r\n                    id=\"userId\"\r\n                    onChange={handleChange}\r\n                    value={formData.userId}\r\n                    type=\"text\"\r\n                    name=\"userId\"\r\n                  />\r\n                </div>\r\n                <button className=\"room-form-submit\" onClick={removeUser}>Remove User</button>\r\n\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"newRoomName\">Change room name</label>\r\n                  <input\r\n                    placeholder=\"e.g. plan-event\"\r\n                    className=\"input\"\r\n                    id=\"newRoomName\"\r\n                    onChange={handleChange}\r\n                    value={formData.newRoomName}\r\n                    type=\"text\"\r\n                    name=\"newRoomName\"\r\n                  />\r\n                </div>\r\n                <button className=\"room-form-submit\" onClick={changeRoomName}>Change Name</button>\r\n\r\n                <DeleteRoomForm roomName={props.roomName} deleteRoom={deleteRoom}/>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomSettingsForm;\r\n","import React from 'react';\r\nimport RoomSettingsForm from './RoomSettingsForm';\r\n\r\nfunction NavBar(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header-content\">\r\n        <div className=\"nav-container\">\r\n          <div className=\"nav-adjacent\">\r\n            <button onClick={props.toggleRoomNavSlide} className=\"open-room-side-nav\"><i className=\"fas fa-bars\"></i></button>\r\n            <h2 className=\"room-header\"># {props.roomName}</h2>\r\n          </div>\r\n          <nav className=\"nav\">\r\n            <ul className=\"nav-list\">\r\n              <li className=\"nav-item open-user-side-nav\" onClick={props.toggleUserNavSlide}><i className=\"fas fa-user-friends\"></i></li>\r\n              <RoomSettingsForm roomName={props.roomName} roomId={props.roomId} currentUser={props.currentUser}/>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default NavBar;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\nimport Modal from 'react-modal';\r\nModal.setAppElement('#root')\r\n\r\nfunction CreateRoomForm(props){\r\n  const {user} = useAuth0();\r\n  const [modalIsOpen,setIsOpen] = useState(false);\r\n  const [formData, setFormData] = useState({roomName: \"\", roomDescription: \"\"});\r\n\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function closeModal(){\r\n    setIsOpen(false);\r\n  }\r\n\r\n  function handleChange(e) {\r\n    const {value, name} = e.target;\r\n    setFormData(prevFormData => ({...prevFormData, [name]: value}));\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    const roomId = Math.floor((Math.random() * 9999999) + 1000000);\r\n    const roomName = formData.roomName;\r\n    const data = {userId: user.name, roomId, roomName, username: props.username};\r\n    e.preventDefault();\r\n    fetch(\"http://localhost:4001/api/updateUser\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    setIsOpen(false);\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 100);\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <>\r\n      <p onClick={openModal} className=\"sidebar-modal-header\">+ Add a room</p>\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={closeModal}\r\n        contentLabel=\"Create Room Form\"\r\n        className=\"modal\"\r\n        overlayClassName=\"overlay\"\r\n      >\r\n        <div className=\"room-form-modal\">\r\n          <div className=\"room-form-modal-header\">\r\n            <h2 className=\"room-form-header\">Create Room</h2>\r\n            <button className=\"close-room-form\" onClick={closeModal}>X</button>\r\n          </div>\r\n\r\n          <div className=\"room-form-container\">\r\n            <form className=\"room-form\">\r\n              <div className=\"room-form-inputs\">\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"roomName\">Name</label>\r\n                  <input maxlength=\"25\" className=\"input\" id=\"roomName\" onChange={handleChange} value={formData.roomName} required type=\"text\" name=\"roomName\"/>\r\n                </div>\r\n                <div className=\"input-item\">\r\n                  <label className=\"room-form-label\" for=\"roomDescription\">Description (Optional)</label>\r\n                  <input maxlength=\"75\" className=\"input\" id=\"roomDescription\" onChange={handleChange} value={formData.roomDescription} type=\"text\" name=\"roomDescription\"/>\r\n                </div>\r\n              </div>\r\n              <button className=\"room-form-submit\" onClick={handleSubmit} >Create Room</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n      </>\r\n\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateRoomForm;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {ChatManager, TokenProvider} from '@pusher/chatkit-client';\r\nimport Modal from 'react-modal';\r\nModal.setAppElement('#root')\r\n\r\nfunction JoinRoomForm(props) {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [roomId, setRoomId] = useState(\"\");\r\n  const [modalIsOpen,setIsOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const chatManager = new ChatManager({\r\n        instanceLocator: process.env.REACT_APP_CHATKIT_INSTANCE_LOCATOR_KEY,\r\n        userId: props.currentId,\r\n        tokenProvider: new TokenProvider({\r\n            url: process.env.REACT_APP_TEST_TOKEN\r\n        })\r\n    })\r\n\r\n    chatManager\r\n      .connect()\r\n      .then(currentUser => {\r\n          setCurrentUser(currentUser);\r\n      })\r\n      .catch(error => console.log(error))\r\n  }, [])\r\n\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function closeModal(){\r\n    setIsOpen(false);\r\n  }\r\n\r\n  function handleChange(e) {\r\n    const {value} = e.target;\r\n    setRoomId(value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    currentUser.joinRoom({ roomId: roomId })\r\n    .catch(err => console.log(err))\r\n    setIsOpen(false);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!(currentUser === null) && (\r\n        <>\r\n          <p onClick={openModal} className=\"sidebar-modal-header\">+ Join room</p>\r\n          <Modal\r\n            isOpen={modalIsOpen}\r\n            onRequestClose={closeModal}\r\n            contentLabel=\"Room Settings\"\r\n            className=\"modal\"\r\n            overlayClassName=\"overlay\"\r\n          >\r\n            <div className=\"room-form-modal\">\r\n              <div className=\"room-form-modal-header\">\r\n                <h2 className=\"room-form-header\">Join Room</h2>\r\n                <button className=\"close-room-form\" onClick={closeModal}>X</button>\r\n              </div>\r\n\r\n              <div className=\"room-form-container\">\r\n                <form className=\"room-form\">\r\n                  <div className=\"room-form-inputs\">\r\n                    <div className=\"input-item\">\r\n                      <label className=\"room-form-label\" for=\"roomId\">Room Id</label>\r\n                      <input className=\"input\" id=\"roomId\" onChange={handleChange} value={roomId} required type=\"text\" name=\"roomId\"/>\r\n                    </div>\r\n                  </div>\r\n                  <button className=\"room-form-submit\" onClick={handleSubmit}>Join Room</button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </Modal>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default JoinRoomForm;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\nimport CreateRoomForm from './CreateRoomForm';\r\nimport JoinRoomForm from './JoinRoomForm';\r\n\r\nfunction RoomSideBar(props) {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const { isAuthenticated, loginWithRedirect, logout, user} = useAuth0();\r\n\r\n  useEffect(() => {\r\n    function removeRoomNavSlide() {\r\n      props.setRoomNavSlide(false)\r\n    }\r\n\r\n    document.body.addEventListener(\"click\", removeRoomNavSlide);\r\n\r\n    return () => document.body.removeEventListener(\"click\", removeRoomNavSlide)\r\n  }, [])\r\n\r\n  function reloadPage() {\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 10)\r\n  }\r\n\r\n  return (\r\n    <div className=\"room-side-bar\">\r\n      <div className=\"room-side-bar-content\">\r\n        <nav className={`room-side-nav ${props.roomNavSlide ? \"room-side-nav-open\" : \"\"}`}>\r\n          <div className=\"room-side-nav-content\">\r\n            <h3 className=\"room-side-nav-list-header\">Rooms</h3>\r\n            <ul className=\"room-side-nav-list\">\r\n              {props.rooms.map(room => (\r\n                <li key={room.roomId} onClick={reloadPage} className=\"room-side-nav-item\"><Link className=\"link\" to={`/chatapp/${room.roomName}/${room.roomId}`}># {room.roomName}</Link></li>\r\n              ))}\r\n              {user && <CreateRoomForm username={props.username} currentId={user.name}/>}\r\n              {user && <JoinRoomForm currentId={user.name}/>}\r\n            </ul>\r\n          </div>\r\n\r\n\r\n          {!isAuthenticated && (\r\n            <button onClick={() => loginWithRedirect({})}>Log in</button>\r\n          )}\r\n\r\n          {isAuthenticated && <button className=\"logout-btn\" onClick={() => logout()}>Log out</button>}\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomSideBar;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\nfunction UserSideBar(props) {\r\n\r\n  useEffect(() => {\r\n    function removeUserNavSlide() {\r\n      props.setUserNavSlide(false)\r\n    }\r\n\r\n    document.body.addEventListener(\"click\", removeUserNavSlide);\r\n\r\n    return () => document.body.removeEventListener(\"click\", removeUserNavSlide)\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"user-side-bar\">\r\n      <div className=\"user-side-bar-content\">\r\n        <nav className={`user-side-nav ${props.userNavSlide ? \"user-side-nav-open\" : \"\"}`}>\r\n          <div className=\"user-side-nav-content\">\r\n            <h3 className=\"user-side-nav-list-header\"># {props.roomName}</h3>\r\n            <p className=\"user-side-nav-room-description\">{props.roomDescription}</p>\r\n            <h3 className=\"user-side-nav-list-header\">Members</h3>\r\n            <ul className=\"user-side-nav-list\">\r\n              {props.roomUsers.map(user => (\r\n                <li key={user.id} className=\"user-side-nav-item\">\r\n                  {/*<i style={{color: user.presence.state === 'online' ? \"#66FF00\" : \"#FF0000\"}} className=\"fas fa-circle\"></i>*/} {user.username}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserSideBar;\r\n","import React from 'react';\r\n\r\nfunction MessageList(props) {\r\n  return (\r\n    <ul className=\"message-list\">\r\n        {props.messages.length === 0 && (\r\n          <li className=\"message-welcome\">\r\n            <h2 className=\"room-header\"># {props.roomName}</h2>\r\n            <p>Welcome to the <strong># {props.roomName}</strong> room!</p>\r\n          </li>\r\n        )}\r\n        {props.messages.map((message, index) => (\r\n          <li className=\"message-item\" key={index}>\r\n            <div className=\"message-item-content\">\r\n              <h3 className=\"message-sender\">{message.username}</h3>\r\n              <p className=\"message-text\">{message.text}</p>\r\n            </div>\r\n          </li>\r\n        ))}\r\n        <li></li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default MessageList;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\nfunction Input(props) {\r\n  const [messageInfo, setMessageInfo] = useState({username: \"\", timeSent: \"\", text: \"\", roomId: \"\"});\r\n\r\n  useEffect(() => {\r\n    if(props.username) {\r\n      setMessageInfo(prevMessageInfo => ({...prevMessageInfo, username: props.username}));\r\n    }\r\n\r\n    if(props.roomId) {\r\n      setMessageInfo(prevMessageInfo => ({...prevMessageInfo, roomId: props.roomId}));\r\n    }\r\n  }, [props.username, props.roomId]);\r\n\r\n  function handleChange(e) {\r\n    const {value} = e.target;\r\n    setMessageInfo(prevMessageInfo => ({...prevMessageInfo, text: value}));\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onSubmit(messageInfo);\r\n    setMessageInfo(prevMessageInfo => ({...prevMessageInfo, timeSent: \"\", text: \"\"}));\r\n  }\r\n\r\n  return (\r\n    <div className=\"form-container\">\r\n      <div className=\"form-content\">\r\n        <form onSubmit={handleSubmit} className=\"input-field\">\r\n            <input type=\"text\" className=\"message-input\" onChange={handleChange} value={messageInfo.text} placeholder={`Message #${props.roomName}`} />\r\n            <button className=\"message-submit\"><i className=\"fas fa-paper-plane\"></i></button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\nexport default Input;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport useApiCall from '../views/useApiCall';\r\nimport {useAuth0} from \"../react-auth0-spa\";\r\nimport NavBar from './NavBar';\r\nimport RoomSideBar from './RoomSideBar';\r\nimport UserSideBar from './UserSideBar';\r\nimport MessageList from './MessageList';\r\nimport Input from './Input';\r\n\r\nfunction ChatApp(props) {\r\n  const token = process.env.REACT_APP_MGMT_API_ACCESS_TOKEN;\r\n  const [fullUserInfo, setFullUserInfo] = useState({});\r\n  const [userRooms, setUserRooms] = useState([]);\r\n  const [roomUsers, setRoomUsers] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [currentRoom, setCurrentRoom] = useState({users: []});\r\n  const [messages, setMessages] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [roomNavSlide, setRoomNavSlide] = useState(false);\r\n  const [userNavSlide, setUserNavSlide] = useState(false);\r\n  const {roomId} = useParams();\r\n  const {roomName} = useParams();\r\n  const {user} = useAuth0();\r\n  const socket = socketIOClient(`http://127.0.0.1:4001`);\r\n\r\n  useEffect(() => {\r\n    const data = {roomId};\r\n    fetch(\"http://localhost:4001/api/findRoom\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log(data.users)\r\n      setRoomUsers(data.users)\r\n    })\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const data = {userId: user.name};\r\n    fetch(\"http://localhost:4001/api/findUser\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      data.rooms.forEach(room => {\r\n        const data = {roomId: room}\r\n        fetch(\"http://localhost:4001/api/findRoom\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify(data)\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => setUserRooms(prevUserRooms => [...prevUserRooms, data]));\r\n      })\r\n    })\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"connected\", response => {\r\n      console.log(response);\r\n    });\r\n\r\n    socket.emit(\"joined_room\", roomId);\r\n\r\n    socket.on(\"message\", response => {\r\n      console.log(response);\r\n      setMessages(prevMessages => [...prevMessages, response]);\r\n    })\r\n  }, [roomId]);\r\n\r\n  useEffect(() => {\r\n    if(user) {\r\n      console.log(user);\r\n      fetch(`https://dev-pdp1v9a4.auth0.com/api/v2/users/${user.sub}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setFullUserInfo(data);\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n  }, [user])\r\n\r\n  useEffect(() => {\r\n    if(messages.length > 0) {\r\n      window.scrollTo(0, document.body.scrollHeight)\r\n    }\r\n  }, [messages])\r\n\r\n  function addMessage(messageInfo) {\r\n    socket.emit(\"sent_message\", messageInfo);\r\n  }\r\n\r\n  function toggleRoomNavSlide() {\r\n    setRoomNavSlide(prevRoomNavSlide => !prevRoomNavSlide);\r\n  }\r\n\r\n  function toggleUserNavSlide() {\r\n    setUserNavSlide(prevUserNavSlide => !prevUserNavSlide);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"chat-box\">\r\n        <RoomSideBar\r\n        setRoomNavSlide={setRoomNavSlide}\r\n        roomNavSlide={roomNavSlide}\r\n        currentId={props.currentId}\r\n        username={fullUserInfo.username}\r\n        rooms={userRooms}\r\n        />\r\n\r\n        <main className=\"main\">\r\n          <NavBar\r\n          roomId={roomId}\r\n          currentUser={currentUser}\r\n          toggleUserNavSlide={toggleUserNavSlide}\r\n          toggleRoomNavSlide={toggleRoomNavSlide}\r\n          roomName={roomName}\r\n          />\r\n\r\n\r\n          <MessageList messages={messages} roomName={roomName}/>\r\n          <Input\r\n          roomId={roomId}\r\n          username={fullUserInfo.username}\r\n          roomName={roomName}\r\n          className=\"input-field\"\r\n          onSubmit={addMessage}\r\n          />\r\n\r\n\r\n        </main>\r\n          <UserSideBar\r\n          roomName={roomName}\r\n          rooms={userRooms}\r\n          roomDescription={\"asdasd\"}\r\n          roomUsers={roomUsers}\r\n          userNavSlide={userNavSlide}\r\n          setUserNavSlide={setUserNavSlide}\r\n           />\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatApp;\r\n","import { createBrowserHistory } from \"history\";\r\nexport default createBrowserHistory();\r\n","import React, {useState, useEffect} from 'react';\nimport {Switch, Route, Router, useHistory} from 'react-router-dom';\nimport './App.css';\nimport Landing from './components/Landing';\nimport Home from './components/Home';\nimport ExternalApi from './views/ExternalApi';\nimport ChatApp from './components/ChatApp';\nimport RoomSideBar from './components/RoomSideBar';\nimport browserHistory from \"./utils/history\";\n\nimport { default as Chatkit } from '@pusher/chatkit-server';\nimport { useAuth0 } from \"./react-auth0-spa\";\n\nfunction App() {\n  const {loading, user, isAuthenticated, loginWithRedirect} = useAuth0();\n\n  return (\n    <div className=\"app\">\n      <Router basename=\"/real-speak\" history={browserHistory}>\n        <Switch>\n          <Route path=\"/\" exact>\n            {!isAuthenticated ? <Landing/> : <Home/>}\n          </Route>\n          <Route path=\"/chatapp/:roomName/:roomId\">\n            {user && <ChatApp currentId={user.name}/>}\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Auth0Provider } from \"./react-auth0-spa\";\nimport config from \"./auth_config.json\";\nimport history from \"./utils/history\";\n\n// A function that routes the user to the right place\n// after login\nconst onRedirectCallback = appState => {\n  history.push(\n    appState && appState.targetUrl\n      ? appState.targetUrl\n      : window.location.pathname\n  );\n};\n\nReactDOM.render(\n  <Auth0Provider\n    domain={config.domain}\n    client_id={config.clientId}\n    redirect_uri={window.location.origin}\n    audience={config.audience}\n    onRedirectCallback={onRedirectCallback}\n  >\n    <App />\n  </Auth0Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}