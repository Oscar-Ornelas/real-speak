(this["webpackJsonpreal-speak"]=this["webpackJsonpreal-speak"]||[]).push([[0],{233:function(e,t,n){e.exports=n(525)},238:function(e,t,n){},268:function(e,t){},270:function(e,t){},280:function(e,t){},282:function(e,t){},297:function(e,t){},305:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=305},312:function(e,t){},313:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=313},348:function(e,t){},349:function(e,t){},431:function(e,t){},525:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(123),r=n.n(l),o=n(45),m=(n(238),n(58)),u=n(231),i=n(4),s=n(35),d=n(19),Z=n.n(d),b=n(59),p=n(232),h=n(228),G=n.n(h),W=function(){return window.history.replaceState({},document.title,window.location.pathname)},V=c.a.createContext(),R=function(){return Object(a.useContext)(V)};var f=function(e){return c.a.createElement("ul",{className:"message-list"},e.messages.map((function(e,t){return c.a.createElement("li",{className:"message-item",key:t},c.a.createElement("div",{className:"message-item-content"},c.a.createElement("h3",{className:"message-sender"},e.sender.name),c.a.createElement("p",{className:"message-text"},e.text)))})),c.a.createElement("li",null))};var X=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),l=n[0],r=n[1];return c.a.createElement("div",{className:"form-container"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(l),r("")},className:"input-field"},c.a.createElement("textarea",{className:"message-input",onChange:function(e){var t=e.target.value;r(t)},value:l,placeholder:"Message #".concat(e.roomName)}),c.a.createElement("button",{className:"message-submit"},c.a.createElement("i",{className:"fas fa-paper-plane"}))))},y=n(36),v=n.n(y),g={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};v.a.setAppElement("#root");var Y=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),l=n[0],r=n[1],o=Object(a.useState)(!1),m=Object(i.a)(o,2),u=m[0],s=m[1];function d(){s(!1)}return c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){s(!0)}},"Settings"),c.a.createElement(v.a,{isOpen:u,onRequestClose:d,style:g,contentLabel:"Room Settings"},c.a.createElement("div",{className:"room-form-modal"},c.a.createElement("h2",{className:"room-form-header"},"Settings"),c.a.createElement("button",{className:"close-room-form",onClick:d},"close"),c.a.createElement("div",{className:"room-form-container"},c.a.createElement("form",{className:"room-form"},c.a.createElement("label",null,"User Id",c.a.createElement("input",{onChange:function(e){var t=e.target.value;r(t)},value:l,required:!0,type:"text",name:"newUserId"})),c.a.createElement("button",{onClick:function(t){t.preventDefault(),e.currentUser.addUserToRoom({userId:l,roomId:e.currentRoomId}).catch((function(e){return console.log(e)})),s(!1),r("")}},"Add User"))))))};var O=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),l=n[0],r=n[1],m=Object(a.useState)({users:[]}),d=Object(i.a)(m,2),Z=d[0],b=d[1],p=Object(a.useState)([]),h=Object(i.a)(p,2),G=h[0],W=h[1],V=Object(a.useState)([]),R=Object(i.a)(V,2),y=(R[0],R[1]),v=Object(o.f)().roomId;return Object(a.useEffect)((function(){new s.ChatManager({instanceLocator:"v1:us1:e7565616-0e2a-4936-9ada-394d97403d4d",userId:e.currentId,tokenProvider:new s.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/e7565616-0e2a-4936-9ada-394d97403d4d/token"})}).connect().then((function(e){return r(e),e.subscribeToRoom({roomId:v,messageLimit:100,hooks:{onMessage:function(e){W((function(t){return[].concat(Object(u.a)(t),[e])}))}}})})).then((function(e){b(e),y(e.userIds),window.scrollTo(0,document.body.scrollHeight)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){G.length>0&&window.scrollTo(0,document.body.scrollHeight)}),[G]),c.a.createElement("div",{className:"chat-box"},!(void 0===Z.name)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"room-header"},"#",Z.name),c.a.createElement(Y,{currentRoomId:Z.id,currentUser:l}),c.a.createElement(f,{messages:G}),c.a.createElement(X,{roomName:Z.name,className:"input-field",onSubmit:function(e){l.sendMessage({text:e,roomId:Z.id}).catch((function(e){return console.error("error",e)}))}})))};var I=function(){var e=R(),t=e.isAuthenticated,n=e.loginWithRedirect,a=e.logout;return c.a.createElement("div",null,!t&&c.a.createElement("button",{onClick:function(){return n({})}},"Log in"),t&&c.a.createElement("button",{onClick:function(){return a()}},"Log out"),t&&c.a.createElement("span",null,c.a.createElement(m.a,{className:"link",to:"/"},"Home")))},N=n(124),k=new(n.n(N).a)({instanceLocator:"v1:us1:e7565616-0e2a-4936-9ada-394d97403d4d",key:"b14bbfb8-c59b-4bba-9749-85c6422a7f69:UdGZBwJpaM5UXJle7RFOFXuaZJrzOpqwvWmFLtcGbvg="});var j=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],l=n[1],r=Object(a.useState)({}),o=Object(i.a)(r,2),m=o[0],u=o[1],s=Object(a.useState)({}),d=Object(i.a)(s,2),Z=d[0],b=d[1],p=R().user;return Object(a.useEffect)((function(){p&&fetch("https://realspeak.auth0.com/api/v2/users/".concat(p.sub),{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik9EbEJRemt6TWtJek56UkZOMFkzTlVaRlJERTVOekU0UXpjNFF6WTVSVVJCT1VVNFFqWTVNUSJ9.eyJpc3MiOiJodHRwczovL3JlYWxzcGVhay5hdXRoMC5jb20vIiwic3ViIjoiT3A4MGtRSFVHYTJEdnJ3dnVFTUxDYThKUjhSY0d3c0tAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vcmVhbHNwZWFrLmF1dGgwLmNvbS9hcGkvdjIvIiwiaWF0IjoxNTg0NTc0OTA4LCJleHAiOjE1ODQ2NjEzMDgsImF6cCI6Ik9wODBrUUhVR2EyRHZyd3Z1RU1MQ2E4SlI4UmNHd3NLIiwic2NvcGUiOiJyZWFkOmNsaWVudF9ncmFudHMgY3JlYXRlOmNsaWVudF9ncmFudHMgZGVsZXRlOmNsaWVudF9ncmFudHMgdXBkYXRlOmNsaWVudF9ncmFudHMgcmVhZDp1c2VycyB1cGRhdGU6dXNlcnMgZGVsZXRlOnVzZXJzIGNyZWF0ZTp1c2VycyByZWFkOnVzZXJzX2FwcF9tZXRhZGF0YSB1cGRhdGU6dXNlcnNfYXBwX21ldGFkYXRhIGRlbGV0ZTp1c2Vyc19hcHBfbWV0YWRhdGEgY3JlYXRlOnVzZXJzX2FwcF9tZXRhZGF0YSBjcmVhdGU6dXNlcl90aWNrZXRzIHJlYWQ6Y2xpZW50cyB1cGRhdGU6Y2xpZW50cyBkZWxldGU6Y2xpZW50cyBjcmVhdGU6Y2xpZW50cyByZWFkOmNsaWVudF9rZXlzIHVwZGF0ZTpjbGllbnRfa2V5cyBkZWxldGU6Y2xpZW50X2tleXMgY3JlYXRlOmNsaWVudF9rZXlzIHJlYWQ6Y29ubmVjdGlvbnMgdXBkYXRlOmNvbm5lY3Rpb25zIGRlbGV0ZTpjb25uZWN0aW9ucyBjcmVhdGU6Y29ubmVjdGlvbnMgcmVhZDpyZXNvdXJjZV9zZXJ2ZXJzIHVwZGF0ZTpyZXNvdXJjZV9zZXJ2ZXJzIGRlbGV0ZTpyZXNvdXJjZV9zZXJ2ZXJzIGNyZWF0ZTpyZXNvdXJjZV9zZXJ2ZXJzIHJlYWQ6ZGV2aWNlX2NyZWRlbnRpYWxzIHVwZGF0ZTpkZXZpY2VfY3JlZGVudGlhbHMgZGVsZXRlOmRldmljZV9jcmVkZW50aWFscyBjcmVhdGU6ZGV2aWNlX2NyZWRlbnRpYWxzIHJlYWQ6cnVsZXMgdXBkYXRlOnJ1bGVzIGRlbGV0ZTpydWxlcyBjcmVhdGU6cnVsZXMgcmVhZDpydWxlc19jb25maWdzIHVwZGF0ZTpydWxlc19jb25maWdzIGRlbGV0ZTpydWxlc19jb25maWdzIHJlYWQ6aG9va3MgdXBkYXRlOmhvb2tzIGRlbGV0ZTpob29rcyBjcmVhdGU6aG9va3MgcmVhZDplbWFpbF9wcm92aWRlciB1cGRhdGU6ZW1haWxfcHJvdmlkZXIgZGVsZXRlOmVtYWlsX3Byb3ZpZGVyIGNyZWF0ZTplbWFpbF9wcm92aWRlciBibGFja2xpc3Q6dG9rZW5zIHJlYWQ6c3RhdHMgcmVhZDp0ZW5hbnRfc2V0dGluZ3MgdXBkYXRlOnRlbmFudF9zZXR0aW5ncyByZWFkOmxvZ3MgcmVhZDpzaGllbGRzIGNyZWF0ZTpzaGllbGRzIGRlbGV0ZTpzaGllbGRzIHJlYWQ6YW5vbWFseV9ibG9ja3MgZGVsZXRlOmFub21hbHlfYmxvY2tzIHVwZGF0ZTp0cmlnZ2VycyByZWFkOnRyaWdnZXJzIHJlYWQ6Z3JhbnRzIGRlbGV0ZTpncmFudHMgcmVhZDpndWFyZGlhbl9mYWN0b3JzIHVwZGF0ZTpndWFyZGlhbl9mYWN0b3JzIHJlYWQ6Z3VhcmRpYW5fZW5yb2xsbWVudHMgZGVsZXRlOmd1YXJkaWFuX2Vucm9sbG1lbnRzIGNyZWF0ZTpndWFyZGlhbl9lbnJvbGxtZW50X3RpY2tldHMgcmVhZDp1c2VyX2lkcF90b2tlbnMgY3JlYXRlOnBhc3N3b3Jkc19jaGVja2luZ19qb2IgZGVsZXRlOnBhc3N3b3Jkc19jaGVja2luZ19qb2IgcmVhZDpjdXN0b21fZG9tYWlucyBkZWxldGU6Y3VzdG9tX2RvbWFpbnMgY3JlYXRlOmN1c3RvbV9kb21haW5zIHJlYWQ6ZW1haWxfdGVtcGxhdGVzIGNyZWF0ZTplbWFpbF90ZW1wbGF0ZXMgdXBkYXRlOmVtYWlsX3RlbXBsYXRlcyByZWFkOm1mYV9wb2xpY2llcyB1cGRhdGU6bWZhX3BvbGljaWVzIHJlYWQ6cm9sZXMgY3JlYXRlOnJvbGVzIGRlbGV0ZTpyb2xlcyB1cGRhdGU6cm9sZXMgcmVhZDpwcm9tcHRzIHVwZGF0ZTpwcm9tcHRzIHJlYWQ6YnJhbmRpbmcgdXBkYXRlOmJyYW5kaW5nIHJlYWQ6bG9nX3N0cmVhbXMgY3JlYXRlOmxvZ19zdHJlYW1zIGRlbGV0ZTpsb2dfc3RyZWFtcyB1cGRhdGU6bG9nX3N0cmVhbXMgY3JlYXRlOnNpZ25pbmdfa2V5cyByZWFkOnNpZ25pbmdfa2V5cyB1cGRhdGU6c2lnbmluZ19rZXlzIiwiZ3R5IjoiY2xpZW50LWNyZWRlbnRpYWxzIn0.C5rtryIzq7jGYpeDUeRekbgmuLO8ifaR5wgKVNp-Ag-dsZT-_M59-H7mTQgoaI0Oi05f9Vlbluzz0SYovMqN2deD6ntB_pmqmvyYe3bgEDr0y5ccbkxmS14ekusG0jnhYEAQ1_2k9KjijOFuKofWULPwd0Ayil5dP_VaWuV7uTLprRcyWmRmYuf_XeljW6LJTCZ71ygxX3o6SBDyiw50Yz-RXemtMvKvMdlwmBrf2a8m2Loaky9QurcxPC5Um93H-s58x9NUQmVJnoeRlZrpuSCrGyRMj7GlY5pLO27eZazW0uKNwfVZRf95yZ6bgJcnPYc595CNkgPkw-SgTl9JUA")}}).then((function(e){return e.json()})).then((function(e){return b(e)}))}),[p]),Object(a.useEffect)((function(){p&&(fetch("https://us1.pusherplatform.io/services/chatkit/v7/".concat("e7565616-0e2a-4936-9ada-394d97403d4d","/users/").concat(p.email)).then((function(e){return e.json()})).then((function(e){u(e),l(m.custom_data.email===p.email)})).catch((function(e){return l(!1)})),c||k.createUser({id:p.email,name:Z.username}))}),[Z]),null},F=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),m=o[0],u=o[1],s=R().user,d=(R().getTokenSilently,function(){var e=Object(b.a)(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://realspeak.auth0.com/api/v2/users/".concat(s.sub),{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik9EbEJRemt6TWtJek56UkZOMFkzTlVaRlJERTVOekU0UXpjNFF6WTVSVVJCT1VVNFFqWTVNUSJ9.eyJpc3MiOiJodHRwczovL3JlYWxzcGVhay5hdXRoMC5jb20vIiwic3ViIjoiT3A4MGtRSFVHYTJEdnJ3dnVFTUxDYThKUjhSY0d3c0tAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vcmVhbHNwZWFrLmF1dGgwLmNvbS9hcGkvdjIvIiwiaWF0IjoxNTg0NTc0OTA4LCJleHAiOjE1ODQ2NjEzMDgsImF6cCI6Ik9wODBrUUhVR2EyRHZyd3Z1RU1MQ2E4SlI4UmNHd3NLIiwic2NvcGUiOiJyZWFkOmNsaWVudF9ncmFudHMgY3JlYXRlOmNsaWVudF9ncmFudHMgZGVsZXRlOmNsaWVudF9ncmFudHMgdXBkYXRlOmNsaWVudF9ncmFudHMgcmVhZDp1c2VycyB1cGRhdGU6dXNlcnMgZGVsZXRlOnVzZXJzIGNyZWF0ZTp1c2VycyByZWFkOnVzZXJzX2FwcF9tZXRhZGF0YSB1cGRhdGU6dXNlcnNfYXBwX21ldGFkYXRhIGRlbGV0ZTp1c2Vyc19hcHBfbWV0YWRhdGEgY3JlYXRlOnVzZXJzX2FwcF9tZXRhZGF0YSBjcmVhdGU6dXNlcl90aWNrZXRzIHJlYWQ6Y2xpZW50cyB1cGRhdGU6Y2xpZW50cyBkZWxldGU6Y2xpZW50cyBjcmVhdGU6Y2xpZW50cyByZWFkOmNsaWVudF9rZXlzIHVwZGF0ZTpjbGllbnRfa2V5cyBkZWxldGU6Y2xpZW50X2tleXMgY3JlYXRlOmNsaWVudF9rZXlzIHJlYWQ6Y29ubmVjdGlvbnMgdXBkYXRlOmNvbm5lY3Rpb25zIGRlbGV0ZTpjb25uZWN0aW9ucyBjcmVhdGU6Y29ubmVjdGlvbnMgcmVhZDpyZXNvdXJjZV9zZXJ2ZXJzIHVwZGF0ZTpyZXNvdXJjZV9zZXJ2ZXJzIGRlbGV0ZTpyZXNvdXJjZV9zZXJ2ZXJzIGNyZWF0ZTpyZXNvdXJjZV9zZXJ2ZXJzIHJlYWQ6ZGV2aWNlX2NyZWRlbnRpYWxzIHVwZGF0ZTpkZXZpY2VfY3JlZGVudGlhbHMgZGVsZXRlOmRldmljZV9jcmVkZW50aWFscyBjcmVhdGU6ZGV2aWNlX2NyZWRlbnRpYWxzIHJlYWQ6cnVsZXMgdXBkYXRlOnJ1bGVzIGRlbGV0ZTpydWxlcyBjcmVhdGU6cnVsZXMgcmVhZDpydWxlc19jb25maWdzIHVwZGF0ZTpydWxlc19jb25maWdzIGRlbGV0ZTpydWxlc19jb25maWdzIHJlYWQ6aG9va3MgdXBkYXRlOmhvb2tzIGRlbGV0ZTpob29rcyBjcmVhdGU6aG9va3MgcmVhZDplbWFpbF9wcm92aWRlciB1cGRhdGU6ZW1haWxfcHJvdmlkZXIgZGVsZXRlOmVtYWlsX3Byb3ZpZGVyIGNyZWF0ZTplbWFpbF9wcm92aWRlciBibGFja2xpc3Q6dG9rZW5zIHJlYWQ6c3RhdHMgcmVhZDp0ZW5hbnRfc2V0dGluZ3MgdXBkYXRlOnRlbmFudF9zZXR0aW5ncyByZWFkOmxvZ3MgcmVhZDpzaGllbGRzIGNyZWF0ZTpzaGllbGRzIGRlbGV0ZTpzaGllbGRzIHJlYWQ6YW5vbWFseV9ibG9ja3MgZGVsZXRlOmFub21hbHlfYmxvY2tzIHVwZGF0ZTp0cmlnZ2VycyByZWFkOnRyaWdnZXJzIHJlYWQ6Z3JhbnRzIGRlbGV0ZTpncmFudHMgcmVhZDpndWFyZGlhbl9mYWN0b3JzIHVwZGF0ZTpndWFyZGlhbl9mYWN0b3JzIHJlYWQ6Z3VhcmRpYW5fZW5yb2xsbWVudHMgZGVsZXRlOmd1YXJkaWFuX2Vucm9sbG1lbnRzIGNyZWF0ZTpndWFyZGlhbl9lbnJvbGxtZW50X3RpY2tldHMgcmVhZDp1c2VyX2lkcF90b2tlbnMgY3JlYXRlOnBhc3N3b3Jkc19jaGVja2luZ19qb2IgZGVsZXRlOnBhc3N3b3Jkc19jaGVja2luZ19qb2IgcmVhZDpjdXN0b21fZG9tYWlucyBkZWxldGU6Y3VzdG9tX2RvbWFpbnMgY3JlYXRlOmN1c3RvbV9kb21haW5zIHJlYWQ6ZW1haWxfdGVtcGxhdGVzIGNyZWF0ZTplbWFpbF90ZW1wbGF0ZXMgdXBkYXRlOmVtYWlsX3RlbXBsYXRlcyByZWFkOm1mYV9wb2xpY2llcyB1cGRhdGU6bWZhX3BvbGljaWVzIHJlYWQ6cm9sZXMgY3JlYXRlOnJvbGVzIGRlbGV0ZTpyb2xlcyB1cGRhdGU6cm9sZXMgcmVhZDpwcm9tcHRzIHVwZGF0ZTpwcm9tcHRzIHJlYWQ6YnJhbmRpbmcgdXBkYXRlOmJyYW5kaW5nIHJlYWQ6bG9nX3N0cmVhbXMgY3JlYXRlOmxvZ19zdHJlYW1zIGRlbGV0ZTpsb2dfc3RyZWFtcyB1cGRhdGU6bG9nX3N0cmVhbXMgY3JlYXRlOnNpZ25pbmdfa2V5cyByZWFkOnNpZ25pbmdfa2V5cyB1cGRhdGU6c2lnbmluZ19rZXlzIiwiZ3R5IjoiY2xpZW50LWNyZWRlbnRpYWxzIn0.C5rtryIzq7jGYpeDUeRekbgmuLO8ifaR5wgKVNp-Ag-dsZT-_M59-H7mTQgoaI0Oi05f9Vlbluzz0SYovMqN2deD6ntB_pmqmvyYe3bgEDr0y5ccbkxmS14ekusG0jnhYEAQ1_2k9KjijOFuKofWULPwd0Ayil5dP_VaWuV7uTLprRcyWmRmYuf_XeljW6LJTCZ71ygxX3o6SBDyiw50Yz-RXemtMvKvMdlwmBrf2a8m2Loaky9QurcxPC5Um93H-s58x9NUQmVJnoeRlZrpuSCrGyRMj7GlY5pLO27eZazW0uKNwfVZRf95yZ6bgJcnPYc595CNkgPkw-SgTl9JUA")}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,l(!0),u(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}());return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"External API"),c.a.createElement("button",{onClick:d},"Ping API"),n&&c.a.createElement("code",null,JSON.stringify(m,null,2)))},J=function(){var e=R(),t=e.loading,n=e.user;return t||!n?c.a.createElement("div",null,"Loading..."):c.a.createElement(a.Fragment,null,c.a.createElement("img",{src:n.picture,alt:"Profile"}),c.a.createElement("h2",null,n.name),c.a.createElement("p",null,n.email),c.a.createElement("p",null,n.username),c.a.createElement("code",null,JSON.stringify(n,null,2)))},E={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};v.a.setAppElement("#root");var z=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),l=n[0],r=n[1],o=Object(a.useState)(!1),m=Object(i.a)(o,2),u=m[0],d=m[1],Z=Object(a.useState)(""),b=Object(i.a)(Z,2),p=b[0],h=b[1];function G(){d(!1)}return Object(a.useEffect)((function(){new s.ChatManager({instanceLocator:"v1:us1:e7565616-0e2a-4936-9ada-394d97403d4d",userId:e.currentId,tokenProvider:new s.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/e7565616-0e2a-4936-9ada-394d97403d4d/token"})}).connect().then((function(e){r(e)})).catch((function(e){return console.log(e)}))}),[]),c.a.createElement("div",null,!(null===l)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:function(){d(!0)}},"Create Room"),c.a.createElement(v.a,{isOpen:u,onRequestClose:G,style:E,contentLabel:"Create Room Form"},c.a.createElement("div",{className:"room-form-modal"},c.a.createElement("h2",{className:"room-form-header"},"Create Room"),c.a.createElement("button",{className:"close-room-form",onClick:G},"close"),c.a.createElement("div",{className:"room-form-container"},c.a.createElement("form",{className:"room-form"},c.a.createElement("label",null,"Room Name",c.a.createElement("input",{onChange:function(e){var t=e.target.value;h(t)},value:p,required:!0,type:"text",name:"roomName"})),c.a.createElement("button",{onClick:function(e){e.preventDefault(),l.createRoom({name:p,private:!1}).catch((function(e){return console.log(e)})),d(!1),window.location.reload()}},"Create Room")))))))},w={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};v.a.setAppElement("#root");var x=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),l=n[0],r=n[1],o=Object(a.useState)(!1),u=Object(i.a)(o,2),d=u[0],Z=u[1],b=Object(a.useState)([]),p=Object(i.a)(b,2),h=p[0],G=p[1],W=Object(a.useState)(""),V=Object(i.a)(W,2),f=V[0],X=V[1],y=Object(a.useState)(!1),g=Object(i.a)(y,2),Y=g[0],O=g[1],I=R(),N=I.isAuthenticated,k=I.loginWithRedirect,j=I.logout,F=I.user;function J(){setTimeout((function(){window.location.reload()}),10)}function E(){O(!1)}return Object(a.useEffect)((function(){function e(){Z(!1)}return document.body.addEventListener("click",e),function(){return document.body.removeEventListener("click",e)}}),[]),Object(a.useEffect)((function(){new s.ChatManager({instanceLocator:"v1:us1:e7565616-0e2a-4936-9ada-394d97403d4d",userId:e.currentId,tokenProvider:new s.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/e7565616-0e2a-4936-9ada-394d97403d4d/token"})}).connect().then((function(e){r(e),G(e.rooms)})).catch((function(e){return console.log(e)}))}),[]),c.a.createElement("div",{className:"side-bar"},c.a.createElement("div",{className:"side-bar-content"},c.a.createElement("button",{onClick:function(){Z((function(e){return!e}))},className:"open-nav"},"\u2630"),c.a.createElement("nav",{className:"nav ".concat(d?"nav-open":"")},c.a.createElement("ul",{className:"nav-list"},h.map((function(e){return c.a.createElement("li",{key:e.id,onClick:J,className:"nav-item"},c.a.createElement(m.a,{className:"link",to:"/chatapp/".concat(e.id)},e.name))}))),c.a.createElement("button",{onClick:function(){O(!0)}},"Join Room"),c.a.createElement(v.a,{isOpen:Y,onRequestClose:E,style:w,contentLabel:"Room Settings"},c.a.createElement("div",{className:"room-form-modal"},c.a.createElement("h2",{className:"room-form-header"},"Join Room"),c.a.createElement("button",{className:"close-room-form",onClick:E},"close"),c.a.createElement("div",{className:"room-form-container"},c.a.createElement("form",{className:"room-form"},c.a.createElement("label",null,"Room Id",c.a.createElement("input",{onChange:function(e){var t=e.target.value;X(t)},value:f,required:!0,type:"text",name:"roomId"})),c.a.createElement("button",{onClick:function(e){e.preventDefault(),l.joinRoom({roomId:f}).catch((function(e){return console.log(e)})),O(!1),window.location.reload()}},"Join Room"))))),F&&c.a.createElement(z,{currentId:F.name}),!N&&c.a.createElement("button",{onClick:function(){return k({})}},"Log in"),N&&c.a.createElement("button",{onClick:function(){return j()}},"Log out"))))},T=n(20),H=Object(T.a)();var B=function(){var e=R(),t=(e.loading,e.user);return c.a.createElement("div",{className:"app"},c.a.createElement(o.b,{history:H},c.a.createElement("header",null,c.a.createElement(I,null),t&&c.a.createElement(x,{currentId:t.name})),c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/",exact:!0},c.a.createElement(j,null)),c.a.createElement(o.a,{path:"/profile",component:J}),c.a.createElement(o.a,{path:"/chatapp/:roomId"},t&&c.a.createElement(O,{currentId:t.name})),c.a.createElement(o.a,{path:"/external-api"},c.a.createElement(F,null)))))},M=n(87);r.a.render(c.a.createElement((function(e){var t=e.children,n=e.onRedirectCallback,l=void 0===n?W:n,r=Object(p.a)(e,["children","onRedirectCallback"]),o=Object(a.useState)(),m=Object(i.a)(o,2),u=m[0],s=m[1],d=Object(a.useState)(),h=Object(i.a)(d,2),R=h[0],f=h[1],X=Object(a.useState)(),y=Object(i.a)(X,2),v=y[0],g=y[1],Y=Object(a.useState)(!0),O=Object(i.a)(Y,2),I=O[0],N=O[1],k=Object(a.useState)(!1),j=Object(i.a)(k,2),F=j[0],J=j[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(Z.a.mark((function e(){var t,n,a,c,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G()(r);case 2:if(t=e.sent,g(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,a=n.appState,l(a);case 10:return e.next=12,t.isAuthenticated();case 12:if(c=e.sent,s(c),!c){e.next=19;break}return e.next=17,t.getUser();case 17:o=e.sent,f(o);case 19:N(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var E=function(){var e=Object(b.a)(Z.a.mark((function e(){var t,n,a=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},J(!0),e.prev=2,e.next=5,v.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,J(!1),e.finish(10);case 13:return e.next=15,v.getUser();case 15:n=e.sent,f(n),s(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,v.handleRedirectCallback();case 3:return e.next=5,v.getUser();case 5:t=e.sent,N(!1),s(!0),f(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(V.Provider,{value:{isAuthenticated:u,user:R,loading:I,popupOpen:F,loginWithPopup:E,handleRedirectCallback:z,getIdTokenClaims:function(){return v.getIdTokenClaims.apply(v,arguments)},loginWithRedirect:function(){return v.loginWithRedirect.apply(v,arguments)},getTokenSilently:function(){return v.getTokenSilently.apply(v,arguments)},getTokenWithPopup:function(){return v.getTokenWithPopup.apply(v,arguments)},logout:function(){return v.logout.apply(v,arguments)}}},t)}),{domain:M.domain,client_id:M.clientId,redirect_uri:window.location.origin,audience:M.audience,onRedirectCallback:function(e){H.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},c.a.createElement(B,null)),document.getElementById("root"))},87:function(e){e.exports=JSON.parse('{"domain":"realspeak.auth0.com","clientId":"0Ha63pjQGY1ao3Hveh8kIOM0biYukl60","audience":"https://realspeak.auth0.com/api/v2/"}')}},[[233,1,2]]]);
//# sourceMappingURL=main.7e11a3b6.chunk.js.map